<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>üçπ Ultimate AI Cocktailmaschine v7.0 - Production Ready Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Roboto+Slab:wght@400;500;600&display=swap" rel="stylesheet">
    
    <style>
        /* === COMPLETE CSS SYSTEM === */
        :root {
            --primary-silver: #c0c0c0;
            --primary-silver-light: #e8e8e8;
            --accent-steel: #708090;
            --dark-charcoal: #1a1a1a;
            --dark-slate: #2a2a2a;
            --dark-navy: #3a3a3a;
            --glass-white: rgba(255, 255, 255, 0.1);
            --glass-silver: rgba(192, 192, 192, 0.15);
            --text-primary: #f8f9fa;
            --text-secondary: #e5e5e5;
            --text-muted: #b8b8b8;
            --success-green: #2ecc71;
            --warning-orange: #f39c12;
            --error-red: #e74c3c;
            --info-blue: #3498db;
            --purple: #9b59b6;
            --teal: #1abc9c;
            --neural-pink: #e91e63;
            --ai-cyan: #00bcd4;
            --security-gold: #ffd700;
            --raspi-green: #c51a4a;
        }
        
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
            -webkit-user-select: none;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        
        body { 
            background: linear-gradient(135deg, var(--dark-charcoal) 0%, var(--dark-slate) 50%, var(--dark-navy) 100%);
            color: var(--text-primary); 
            font-family: 'Inter', sans-serif; 
            min-height: 100vh;
            touch-action: manipulation;
            overflow-x: hidden;
        }
        
        /* === LOADING SCREEN === */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 50%, #3a3a3a 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            color: #f8f9fa;
            font-family: 'Inter', sans-serif;
            transition: opacity 0.5s ease;
        }

        .loading-content {
            text-align: center;
            max-width: 500px;
            padding: 40px;
        }

        .loading-logo {
            font-size: 4rem;
            margin-bottom: 20px;
            animation: loadingPulse 2s infinite;
        }

        .loading-title {
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: #e91e63;
            font-family: 'Roboto Slab', serif;
        }

        .loading-subtitle {
            font-size: 1.1rem;
            color: #b8b8b8;
            margin-bottom: 30px;
        }

        .loading-progress {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 20px;
            position: relative;
        }

        .loading-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #e91e63, #00bcd4);
            border-radius: 3px;
            width: 0%;
            transition: width 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .loading-progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: loadingShimmer 1.5s infinite;
        }

        .loading-status {
            font-size: 1rem;
            color: #e5e5e5;
            min-height: 24px;
        }

        @keyframes loadingPulse {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.1); opacity: 1; }
        }

        @keyframes loadingShimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        /* === SYSTEM BANNER === */
        .system-banner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(90deg, #f39c12, #e67e22);
            color: white;
            padding: 12px 20px;
            z-index: 8000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            transform: translateY(-100%);
            transition: transform 0.3s ease;
        }

        .system-banner.show {
            transform: translateY(0);
        }

        .system-banner.error {
            background: linear-gradient(90deg, #e74c3c, #c0392b);
        }

        .system-banner.success {
            background: linear-gradient(90deg, #2ecc71, #27ae60);
        }

        .banner-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .banner-icon {
            font-size: 1.2rem;
        }

        .banner-text {
            flex: 1;
            text-align: center;
            font-weight: 500;
        }

        .banner-close {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s ease;
        }

        .banner-close:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        /* === MAIN APPLICATION === */
        #mainApp {
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        #mainApp.ready {
            opacity: 1;
        }
        
        /* === NAVIGATION === */
        .nav-menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 350px;
            height: 100vh;
            background: rgba(26, 26, 26, 0.95);
            backdrop-filter: blur(20px);
            z-index: 3000;
            transform: translateX(-100%);
            transition: transform 0.3s ease;
            border-right: 2px solid var(--primary-silver);
            overflow-y: auto;
            box-shadow: 4px 0 20px rgba(0, 0, 0, 0.5);
        }
        
        .nav-menu.open {
            transform: translateX(0);
        }
        
        .nav-header {
            background: linear-gradient(135deg, var(--primary-silver), var(--accent-steel));
            padding: 25px 20px;
            color: white;
            font-weight: 600;
            font-size: 1.2rem;
            position: relative;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .nav-close {
            position: absolute;
            right: 15px;
            top: 15px;
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .nav-close:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
        }
        
        .nav-content {
            padding: 20px 0;
        }
        
        .nav-section {
            margin-bottom: 20px;
        }
        
        .nav-section-title {
            padding: 15px 25px 10px;
            font-weight: 600;
            color: var(--primary-silver-light);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 10px;
        }
        
        .nav-item {
            padding: 15px 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 15px;
            position: relative;
            overflow: hidden;
        }
        
        .nav-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 0;
            height: 100%;
            background: linear-gradient(90deg, var(--primary-silver), transparent);
            transition: width 0.3s ease;
            z-index: -1;
        }
        
        .nav-item:hover::before {
            width: 100%;
        }
        
        .nav-item:hover {
            border-left-color: var(--primary-silver);
            transform: translateX(8px);
            color: var(--text-primary);
        }
        
        .nav-item.active {
            background: rgba(192, 192, 192, 0.2);
            border-left-color: var(--primary-silver);
            color: var(--primary-silver-light);
            font-weight: 500;
        }
        
        .nav-item-icon {
            font-size: 1.2rem;
            width: 24px;
            text-align: center;
        }
        
        .nav-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 2500;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .nav-overlay.open {
            opacity: 1;
            visibility: visible;
        }
        
        /* === HEADER === */
        .app-header {
            background: linear-gradient(135deg, rgba(192, 192, 192, 0.9) 0%, rgba(112, 128, 144, 0.9) 100%);
            padding: 20px 25px;
            display: grid;
            grid-template-columns: auto 1fr auto;
            align-items: center;
            gap: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            position: relative;
            backdrop-filter: blur(10px);
        }
        
        .header-left, .header-right {
            display: flex;
            gap: 12px;
        }
        
        .header-center {
            text-align: center;
        }
        
        .header-btn {
            background: rgba(52, 152, 219, 0.8);
            color: white;
            border: none;
            padding: 10px 18px;
            border-radius: 8px;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            min-height: 44px;
            display: flex;
            align-items: center;
            font-weight: 500;
            cursor: pointer;
            gap: 8px;
            position: relative;
            overflow: hidden;
        }
        
        .header-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s ease;
        }
        
        .header-btn:hover::before {
            left: 100%;
        }
        
        .header-btn:hover {
            background: rgba(52, 152, 219, 1);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }
        
        .header-btn.emergency {
            background: rgba(231, 76, 60, 0.8);
            animation: emergencyPulse 2s infinite;
        }
        
        .header-btn.emergency:hover {
            background: rgba(231, 76, 60, 1);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);
        }
        
        .header-btn.danger {
            background: rgba(231, 76, 60, 0.8);
        }
        
        .header-btn.danger:hover {
            background: rgba(231, 76, 60, 1);
        }
        
        @keyframes emergencyPulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.7); }
            50% { box-shadow: 0 0 0 8px rgba(231, 76, 60, 0); }
        }
        
        .app-header h1 {
            font-family: 'Roboto Slab', serif;
            font-size: 2.2rem;
            color: white;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
            margin-bottom: 8px;
        }
        
        .header-info {
            color: var(--text-secondary);
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        /* === MAIN CONTENT === */
        .main-content {
            padding: 30px 25px;
            max-width: 1600px;
            margin: 0 auto;
            min-height: calc(100vh - 120px);
        }
        
        .page-container {
            width: 100%;
        }
        
        .page-content {
            display: none;
            animation: fadeInUp 0.5s ease;
        }
        
        .page-content.active {
            display: block;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* === SECTION TITLES === */
        .section-title {
            font-family: 'Roboto Slab', serif;
            font-size: 2rem;
            color: var(--primary-silver-light);
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--primary-silver);
            position: relative;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 80px;
            height: 3px;
            background: var(--success-green);
            border-radius: 2px;
        }
        
        .section-subtitle {
            color: var(--text-muted);
            font-size: 1.1rem;
            margin-bottom: 25px;
            font-style: italic;
        }
        
        /* === STATUS CARDS === */
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .status-card {
            background: var(--glass-white);
            backdrop-filter: blur(25px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            cursor: pointer;
            text-align: center;
        }
        
        .status-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-silver), var(--accent-steel));
            border-radius: 20px 20px 0 0;
        }
        
        .status-card.ai::before {
            background: linear-gradient(90deg, var(--neural-pink), var(--ai-cyan));
        }
        
        .status-card.success::before {
            background: linear-gradient(90deg, var(--success-green), var(--teal));
        }
        
        .status-card.warning::before {
            background: linear-gradient(90deg, var(--warning-orange), #e67e22);
        }
        
        .status-card.error::before {
            background: linear-gradient(90deg, var(--error-red), #c0392b);
        }
        
        .status-card:hover {
            background: var(--glass-silver);
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }
        
        .status-card.pulse {
            animation: statusPulse 3s infinite;
        }
        
        @keyframes statusPulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(233, 30, 99, 0.4); }
            50% { box-shadow: 0 0 0 15px rgba(233, 30, 99, 0); }
        }
        
        .status-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            animation: iconFloat 3s ease-in-out infinite;
        }
        
        @keyframes iconFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        .status-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--primary-silver-light);
            margin-bottom: 15px;
        }
        
        .status-value {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--success-green);
            margin-bottom: 15px;
            font-family: 'Roboto Slab', serif;
        }
        
        .status-value.ai { color: var(--neural-pink); }
        .status-value.info { color: var(--info-blue); }
        .status-value.warning { color: var(--warning-orange); }
        .status-value.error { color: var(--error-red); }
        
        .status-description {
            color: var(--text-muted);
            font-size: 1rem;
            line-height: 1.5;
            margin-bottom: 20px;
        }
        
        /* === PROGRESS BARS === */
        .progress-container {
            margin: 20px 0;
        }
        
        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        .progress-bar {
            width: 100%;
            height: 14px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 7px;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success-green), var(--teal));
            border-radius: 7px;
            transition: width 1s ease;
            position: relative;
            overflow: hidden;
        }
        
        .progress-fill.ai {
            background: linear-gradient(90deg, var(--neural-pink), var(--ai-cyan));
        }
        
        .progress-fill.warning {
            background: linear-gradient(90deg, var(--warning-orange), #e67e22);
        }
        
        .progress-fill.error {
            background: linear-gradient(90deg, var(--error-red), #c0392b);
        }
        
        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: progressShimmer 2s infinite;
        }
        
        @keyframes progressShimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        /* === ACTION BUTTONS === */
        .action-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .action-btn {
            background: linear-gradient(135deg, var(--primary-silver), var(--accent-steel));
            color: white;
            border: none;
            padding: 18px 25px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            min-height: 60px;
            position: relative;
            overflow: hidden;
            text-decoration: none;
        }
        
        .action-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.6s ease;
        }
        
        .action-btn:hover::before {
            left: 100%;
        }
        
        .action-btn:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 15px 40px rgba(192, 192, 192, 0.4);
        }
        
        .action-btn:active {
            transform: translateY(-2px) scale(1.01);
        }
        
        .action-btn.ai {
            background: linear-gradient(135deg, var(--neural-pink), var(--ai-cyan));
        }
        
        .action-btn.ai:hover {
            box-shadow: 0 15px 40px rgba(233, 30, 99, 0.4);
        }
        
        .action-btn.success {
            background: linear-gradient(135deg, var(--success-green), var(--teal));
        }
        
        .action-btn.success:hover {
            box-shadow: 0 15px 40px rgba(46, 204, 113, 0.4);
        }
        
        .action-btn.warning {
            background: linear-gradient(135deg, var(--warning-orange), #e67e22);
        }
        
        .action-btn.warning:hover {
            box-shadow: 0 15px 40px rgba(243, 156, 18, 0.4);
        }
        
        .action-btn.danger, .action-btn.error {
            background: linear-gradient(135deg, var(--error-red), #c0392b);
        }
        
        .action-btn.danger:hover, .action-btn.error:hover {
            box-shadow: 0 15px 40px rgba(231, 76, 60, 0.4);
        }
        
        .action-btn.full-width {
            grid-column: 1 / -1;
            font-size: 1.2rem;
            padding: 22px 30px;
            min-height: 70px;
        }
        
        .action-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }
        
        /* === QUICK ACTIONS === */
        .quick-actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .quick-actions {
            background: var(--glass-white);
            backdrop-filter: blur(25px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        .quick-actions:hover {
            background: var(--glass-silver);
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }
        
        .quick-actions h3 {
            color: var(--primary-silver-light);
            margin-bottom: 25px;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        /* === PUMP SYSTEM === */
        .pump-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .pump-card {
            background: var(--glass-white);
            backdrop-filter: blur(25px);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .pump-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--success-green);
            border-radius: 15px 15px 0 0;
        }
        
        .pump-card.offline::before {
            background: var(--error-red);
        }
        
        .pump-card.maintenance::before {
            background: var(--warning-orange);
        }
        
        .pump-card:hover {
            background: var(--glass-silver);
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }
        
        .pump-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .pump-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-silver-light);
        }
        
        .pump-status {
            padding: 6px 15px;
            border-radius: 25px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .pump-status.online {
            background: rgba(46, 204, 113, 0.2);
            color: var(--success-green);
            border: 1px solid var(--success-green);
        }
        
        .pump-status.offline {
            background: rgba(231, 76, 60, 0.2);
            color: var(--error-red);
            border: 1px solid var(--error-red);
        }
        
        .pump-status.maintenance {
            background: rgba(243, 156, 18, 0.2);
            color: var(--warning-orange);
            border: 1px solid var(--warning-orange);
        }
        
        .pump-status.pumping {
            background: rgba(52, 152, 219, 0.2);
            color: var(--info-blue);
            border: 1px solid var(--info-blue);
            animation: pumpingPulse 1s infinite;
        }
        
        @keyframes pumpingPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        
        .pump-info {
            margin-bottom: 20px;
        }
        
        .pump-info-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            font-size: 0.95rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .pump-info-item:last-child {
            border-bottom: none;
        }
        
        .pump-info-label {
            color: var(--text-secondary);
        }
        
        .pump-info-value {
            color: var(--text-primary);
            font-weight: 500;
        }
        
        .pump-controls {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
        }
        
        .pump-btn {
            background: linear-gradient(135deg, var(--primary-silver), var(--accent-steel));
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            font-weight: 500;
        }
        
        .pump-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .pump-btn.success {
            background: linear-gradient(135deg, var(--success-green), var(--teal));
        }
        
        .pump-btn.warning {
            background: linear-gradient(135deg, var(--warning-orange), #e67e22);
        }
        
        .pump-btn.danger {
            background: linear-gradient(135deg, var(--error-red), #c0392b);
        }
        
        /* === MIXING INTERFACE === */
        .mixing-interface {
            background: var(--glass-white);
            backdrop-filter: blur(25px);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 40px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            text-align: center;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }
        
        .mixing-interface::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(233, 30, 99, 0.1) 0%, transparent 50%);
            opacity: 0;
            transition: opacity 0.4s ease;
            pointer-events: none;
        }
        
        .mixing-interface.active {
            border-color: var(--ai-cyan);
            box-shadow: 0 0 40px rgba(0, 188, 212, 0.3);
        }
        
        .mixing-interface.active::before {
            opacity: 1;
        }
        
        .mixing-title {
            font-size: 2.2rem;
            color: var(--primary-silver-light);
            margin-bottom: 25px;
            font-family: 'Roboto Slab', serif;
        }
        
        .mixing-cocktail {
            font-size: 4rem;
            margin-bottom: 25px;
            animation: mixingFloat 3s ease-in-out infinite;
        }
        
        @keyframes mixingFloat {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            33% { transform: translateY(-10px) rotate(5deg); }
            66% { transform: translateY(-5px) rotate(-5deg); }
        }
        
        .mixing-status {
            font-size: 1.4rem;
            color: var(--ai-cyan);
            margin-bottom: 25px;
            font-weight: 600;
        }
        
        .mixing-progress {
            width: 100%;
            height: 25px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 25px;
            box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.2);
        }
        
        .mixing-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--ai-cyan), var(--neural-pink));
            border-radius: 12px;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }
        
        .mixing-progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent);
            animation: mixingShimmer 1s infinite;
        }
        
        @keyframes mixingShimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .mixing-steps {
            text-align: left;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .mixing-step {
            display: flex;
            align-items: center;
            padding: 12px 0;
            font-size: 1rem;
            transition: all 0.3s ease;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .mixing-step:last-child {
            border-bottom: none;
        }
        
        .mixing-step.active {
            color: var(--ai-cyan);
            font-weight: 600;
            background: rgba(0, 188, 212, 0.1);
            border-radius: 8px;
            padding-left: 15px;
            padding-right: 15px;
        }
        
        .mixing-step.completed {
            color: var(--success-green);
            opacity: 0.8;
        }
        
        .mixing-step.pending {
            color: var(--text-muted);
            opacity: 0.6;
        }
        
        .mixing-step-icon {
            width: 30px;
            margin-right: 15px;
            text-align: center;
            font-size: 1.2rem;
        }
        
        /* === COCKTAIL CARDS === */
        .cocktail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .cocktail-card {
            background: var(--glass-white);
            backdrop-filter: blur(25px);
            border-radius: 20px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.4s ease;
            cursor: pointer;
            position: relative;
            animation: slideInUp 0.6s ease;
        }
        
        .cocktail-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            background: var(--glass-silver);
        }
        
        .cocktail-card.ai-generated {
            border: 2px solid var(--neural-pink);
            box-shadow: 0 0 25px rgba(233, 30, 99, 0.3);
        }
        
        .cocktail-card.ai-generated::before {
            content: 'ü§ñ AI';
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--neural-pink);
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            z-index: 2;
        }
        
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .cocktail-image {
            height: 140px;
            background: linear-gradient(135deg, var(--accent-steel), var(--primary-silver));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2.5rem;
            font-weight: 600;
            position: relative;
            overflow: hidden;
        }
        
        .cocktail-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.6s ease;
        }
        
        .cocktail-card:hover .cocktail-image::before {
            left: 100%;
        }
        
        .cocktail-image.ai-generated {
            background: linear-gradient(135deg, var(--neural-pink), var(--ai-cyan));
        }
        
        .cocktail-info {
            padding: 25px;
        }
        
        .cocktail-name {
            font-family: 'Roboto Slab', serif;
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--primary-silver-light);
            margin-bottom: 12px;
            line-height: 1.3;
        }
        
        .cocktail-meta {
            color: var(--text-secondary);
            margin: 12px 0;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .cocktail-description {
            color: var(--text-muted);
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 15px;
        }
        
        .cocktail-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }
        
        .cocktail-stat {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }
        
        .cocktail-stat-value {
            color: var(--text-primary);
            font-weight: 600;
        }
        
        /* === FORMS === */
        .form-section {
            background: var(--glass-white);
            backdrop-filter: blur(25px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .form-section h3 {
            color: var(--primary-silver-light);
            margin-bottom: 25px;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
        }
        
        .input-group label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .form-control {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 12px 16px;
            color: var(--text-primary);
            font-size: 1rem;
            transition: all 0.3s ease;
            font-family: inherit;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary-silver);
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 0 4px rgba(192, 192, 192, 0.1);
        }
        
        .form-control::placeholder {
            color: var(--text-muted);
        }
        
        .form-control option {
            background: var(--dark-slate);
            color: var(--text-primary);
            padding: 10px;
        }
        
        /* === TOASTS === */
        .toast-container {
            position: fixed;
            top: 100px;
            right: 25px;
            z-index: 5000;
            max-width: 400px;
        }
        
        .toast {
            background: var(--glass-white);
            backdrop-filter: blur(20px);
            border-radius: 12px;
            padding: 18px 22px;
            margin-bottom: 12px;
            border-left: 4px solid var(--success-green);
            color: var(--text-primary);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transform: translateX(450px);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .toast::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: var(--success-green);
            animation: toastProgress 5s linear;
        }
        
        @keyframes toastProgress {
            from { width: 100%; }
            to { width: 0%; }
        }
        
        .toast.show {
            transform: translateX(0);
        }
        
        .toast.error {
            border-left-color: var(--error-red);
        }
        
        .toast.error::before {
            background: var(--error-red);
        }
        
        .toast.warning {
            border-left-color: var(--warning-orange);
        }
        
        .toast.warning::before {
            background: var(--warning-orange);
        }
        
        .toast.ai {
            border-left-color: var(--neural-pink);
        }
        
        .toast.ai::before {
            background: var(--neural-pink);
        }
        
        .toast.info {
            border-left-color: var(--info-blue);
        }
        
        .toast.info::before {
            background: var(--info-blue);
        }
        
        .toast-icon {
            font-size: 1.2rem;
            flex-shrink: 0;
        }
        
        .toast-content {
            flex: 1;
            font-size: 0.95rem;
            line-height: 1.4;
        }
        
        .toast-close {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            font-size: 1.2rem;
            padding: 0;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: color 0.3s ease;
        }
        
        .toast-close:hover {
            color: var(--text-primary);
        }
        
        /* === MODALS === */
        .modal-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 4000;
            display: none;
        }
        
        .modal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
        }
        
        .modal {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--glass-white);
            backdrop-filter: blur(30px);
            border-radius: 25px;
            width: 95%;
            max-width: 900px;
            max-height: 90vh;
            overflow: hidden;
            border: 2px solid var(--primary-silver-light);
            animation: modalSlideIn 0.4s ease;
            display: flex;
            flex-direction: column;
        }
        
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translate(-50%, -60%) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }
        
        .modal-header {
            background: linear-gradient(135deg, var(--primary-silver), var(--accent-steel));
            padding: 25px 30px;
            text-align: center;
            position: relative;
            flex-shrink: 0;
        }
        
        .modal-header.ai {
            background: linear-gradient(135deg, var(--neural-pink), var(--ai-cyan));
        }
        
        .modal-header.success {
            background: linear-gradient(135deg, var(--success-green), var(--teal));
        }
        
        .modal-header.warning {
            background: linear-gradient(135deg, var(--warning-orange), #e67e22);
        }
        
        .modal-header.error {
            background: linear-gradient(135deg, var(--error-red), #c0392b);
        }
        
        .modal-title {
            font-family: 'Roboto Slab', serif;
            color: white;
            font-size: 1.6rem;
            font-weight: 500;
            margin: 0;
        }
        
        .modal-close {
            position: absolute;
            right: 20px;
            top: 20px;
            color: white;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            border: none;
        }
        
        .modal-close:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1) rotate(90deg);
        }
        
        .modal-body {
            padding: 30px;
            overflow-y: auto;
            flex: 1;
        }
        
        /* === RESPONSIVE DESIGN === */
        @media (max-width: 1200px) {
            .status-grid {
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            }
            
            .quick-actions-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .app-header {
                grid-template-columns: 1fr;
                text-align: center;
                gap: 15px;
            }
            
            .header-left, .header-right {
                justify-content: center;
            }
            
            .nav-menu {
                width: 100%;
            }
            
            .main-content {
                padding: 20px 15px;
            }
            
            .action-grid {
                grid-template-columns: 1fr;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .pump-grid {
                grid-template-columns: 1fr;
            }
            
            .cocktail-grid {
                grid-template-columns: 1fr;
            }
            
            .status-grid {
                grid-template-columns: 1fr;
            }
            
            .pump-controls {
                grid-template-columns: 1fr;
            }
            
            .toast-container {
                right: 15px;
                left: 15px;
                max-width: none;
            }
            
            .toast {
                transform: translateY(-100px);
            }
            
            .toast.show {
                transform: translateY(0);
            }
            
            .app-header h1 {
                font-size: 1.8rem;
            }
            
            .section-title {
                font-size: 1.6rem;
            }
        }
        
        @media (max-width: 480px) {
            .main-content {
                padding: 15px 10px;
            }
            
            .status-card, .quick-actions, .pump-card, .form-section {
                padding: 20px;
            }
            
            .mixing-interface {
                padding: 25px 20px;
            }
            
            .modal {
                width: 98%;
                margin: 1%;
            }
            
            .modal-body {
                padding: 20px;
            }
        }
        
        /* === UTILITY CLASSES === */
        .text-center { text-align: center; }
        .text-left { text-align: left; }
        .text-right { text-align: right; }
        
        .mb-0 { margin-bottom: 0; }
        .mb-1 { margin-bottom: 0.5rem; }
        .mb-2 { margin-bottom: 1rem; }
        .mb-3 { margin-bottom: 1.5rem; }
        .mb-4 { margin-bottom: 2rem; }
        
        .mt-0 { margin-top: 0; }
        .mt-1 { margin-top: 0.5rem; }
        .mt-2 { margin-top: 1rem; }
        .mt-3 { margin-top: 1.5rem; }
        .mt-4 { margin-top: 2rem; }
        
        .hidden { display: none !important; }
        .visible { display: block !important; }
        
        .disabled {
            opacity: 0.6;
            pointer-events: none;
            cursor: not-allowed;
        }
        
        /* === ERROR BOUNDARY === */
        .error-boundary {
            padding: 40px;
            text-align: center;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            border-radius: 15px;
            margin: 20px;
            box-shadow: 0 10px 30px rgba(231, 76, 60, 0.3);
        }

        .error-title {
            font-size: 1.8rem;
            margin-bottom: 15px;
            font-family: 'Roboto Slab', serif;
        }

        .error-message {
            margin-bottom: 25px;
            font-size: 1.1rem;
            line-height: 1.5;
        }

        .error-button {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .error-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">ü§ñüçπ</div>
            <div class="loading-title">Ultimate AI Cocktailmaschine</div>
            <div class="loading-subtitle">Production Ready Edition v7.0</div>
            <div class="loading-progress">
                <div class="loading-progress-fill" id="loadingProgressFill"></div>
            </div>
            <div class="loading-status" id="loadingStatus">System wird initialisiert...</div>
        </div>
    </div>

    <!-- System Status Banner -->
    <div id="systemBanner" class="system-banner">
        <div class="banner-content">
            <span class="banner-icon">‚ö†Ô∏è</span>
            <span class="banner-text" id="bannerText">System-Meldung</span>
            <button class="banner-close" id="bannerClose">&times;</button>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp">
        <!-- Navigation -->
        <nav class="nav-menu" id="navMenu">
            <div class="nav-header">
                <h3>üçπ AI Cocktailmaschine v7.0</h3>
                <button class="nav-close" id="navClose">&times;</button>
            </div>
            <div class="nav-content" id="navContent">
                <div class="nav-section">
                    <div class="nav-section-title">ü§ñ AI-System</div>
                    <div class="nav-item active" data-page="dashboard">
                        <span class="nav-item-icon">üè†</span> AI Dashboard
                    </div>
                    <div class="nav-item" data-page="ai-lab">
                        <span class="nav-item-icon">üß†</span> Neural Network Lab
                    </div>
                    <div class="nav-item" data-page="cocktails">
                        <span class="nav-item-icon">üçπ</span> 100 AI Cocktails
                    </div>
                    <div class="nav-item" data-page="mixing">
                        <span class="nav-item-icon">ü•§</span> Mixing Interface
                    </div>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">üîß Hardware</div>
                    <div class="nav-item" data-page="pumps">
                        <span class="nav-item-icon">‚öôÔ∏è</span> 10-Pumpen-System
                    </div>
                    <div class="nav-item" data-page="ingredients">
                        <span class="nav-item-icon">üß™</span> Zutaten-Konfiguration
                    </div>
                    <div class="nav-item" data-page="hardware">
                        <span class="nav-item-icon">üîß</span> Hardware-Steuerung
                    </div>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">üîê System</div>
                    <div class="nav-item" data-page="monitoring">
                        <span class="nav-item-icon">üìä</span> System-Monitor
                    </div>
                    <div class="nav-item" data-page="logs">
                        <span class="nav-item-icon">üìù</span> Logs & Diagnose
                    </div>
                    <div class="nav-item" data-page="settings">
                        <span class="nav-item-icon">‚öôÔ∏è</span> Einstellungen
                    </div>
                </div>
            </div>
        </nav>
        <div class="nav-overlay" id="navOverlay"></div>

        <!-- Header -->
        <header class="app-header">
            <div class="header-left">
                <button class="header-btn" id="menuBtn">‚ò∞ Men√º</button>
                <button class="header-btn emergency" id="emergencyBtn">üö® Notfall</button>
            </div>
            <div class="header-center">
                <h1>ü§ñ AI Cocktailmaschine Professional</h1>
                <div class="header-info">
                    <span id="systemVersion">v7.0 Production</span> | 
                    <span id="currentUser">Russelcrowe4</span> | 
                    <span id="currentTime">2025-05-25 19:49:04 UTC</span>
                </div>
            </div>
            <div class="header-right">
                <button class="header-btn" id="statusBtn">üìä Status</button>
                <button class="header-btn danger" id="logoutBtn">üö™ Logout</button>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="main-content">
            <div id="pageContainer" class="page-container">
                
                <!-- Dashboard Page -->
                <div class="page-content active" id="dashboard">
                    <div class="section-title">ü§ñ AI Neural Network Dashboard</div>
                    
                    <div class="status-grid">
                        <div class="status-card ai pulse">
                            <div class="status-icon">üß†</div>
                                                   <div class="status-title">Neural Network</div>
                        <div class="status-value ai" id="aiStatus">AKTIV</div>
                        <div class="status-description">100 Cocktails trainiert | Confidence: <span id="aiConfidenceDisplay">96.8%</span></div>
                        <div class="progress-container">
                            <div class="progress-label">
                                <span>Training Progress</span>
                                <span id="trainingProgressText">100%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill ai" id="trainingProgressBar" style="width: 100%;"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="status-card success">
                        <div class="status-icon">‚öôÔ∏è</div>
                        <div class="status-title">10-Pumpen-System</div>
                        <div class="status-value" id="pumpStatus">10/10 ONLINE</div>
                        <div class="status-description">Alle Pumpen betriebsbereit | GPIO 18-27</div>
                        <div class="progress-container">
                            <div class="progress-label">
                                <span>System Health</span>
                                <span id="systemHealth">98.7%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="systemHealthBar" style="width: 98.7%;"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="status-card ai">
                        <div class="status-icon">üéØ</div>
                        <div class="status-title">AI-Generiert</div>
                        <div class="status-value ai" id="aiGenerated">47</div>
                        <div class="status-description">Personalisierte Cocktails f√ºr Russelcrowe4</div>
                        <div class="progress-container">
                            <div class="progress-label">
                                <span>Erfolgsrate</span>
                                <span id="aiSuccessRate">97.3%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill ai" id="aiSuccessBar" style="width: 97.3%;"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="status-card warning">
                        <div class="status-icon">üçπ</div>
                        <div class="status-title">Mixing Queue</div>
                        <div class="status-value warning" id="mixingQueue">0</div>
                        <div class="status-description">Cocktails in Warteschlange</div>
                        <div class="progress-container">
                            <div class="progress-label">
                                <span>Kapazit√§t</span>
                                <span id="capacityPercent">0%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill warning" id="capacityBar" style="width: 0%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- AI Actions -->
                <div class="section-title">üöÄ AI-Funktionen</div>
                
                <div class="quick-actions-grid">
                    <div class="quick-actions">
                        <h3>üß† Neural Network</h3>
                        <div class="action-grid">
                            <button class="action-btn ai" onclick="trainAI()">
                                üß† AI Trainieren
                            </button>
                            <button class="action-btn ai" onclick="generateAIRecipe()">
                                ü§ñ AI-Rezept
                            </button>
                            <button class="action-btn ai" onclick="analyzeUserPreferences()">
                                üë§ Geschmacks-Analyse
                            </button>
                            <button class="action-btn ai" onclick="optimizeCocktailLibrary()">
                                ‚ö° Bibliothek optimieren
                            </button>
                        </div>
                    </div>
                    
                    <div class="quick-actions">
                        <h3>üéØ Personalisierung</h3>
                        <div class="action-grid">
                            <button class="action-btn success" onclick="getPersonalizedRecommendations()">
                                üéØ AI-Empfehlungen
                            </button>
                            <button class="action-btn warning" onclick="createFlavorProfile()">
                                üåà Flavor-Profil
                            </button>
                            <button class="action-btn" onclick="analyzeCompatibility()">
                                üîó Cocktail-Matching
                            </button>
                            <button class="action-btn" onclick="predictUserTrends()">
                                üìà Trend-Vorhersage
                            </button>
                        </div>
                    </div>
                    
                    <div class="quick-actions">
                        <h3>üîß Hardware-Steuerung</h3>
                        <div class="action-grid">
                            <button class="action-btn success" onclick="initializeAllPumps()">
                                üöÄ Pumpen initialisieren
                            </button>
                            <button class="action-btn warning" onclick="calibrateAllPumps()">
                                üìè Alle kalibrieren
                            </button>
                            <button class="action-btn" onclick="testAllPumps()">
                                üîÑ System-Test
                            </button>
                            <button class="action-btn danger" onclick="emergencyStopAllPumps()">
                                üõë Notfall-Stopp
                            </button>
                        </div>
                    </div>
                    
                    <div class="quick-actions">
                        <h3>üçπ Cocktail-System</h3>
                        <div class="action-grid">
                            <button class="action-btn ai full-width" onclick="showMixingInterface()">
                                ü•§ Mixing Interface √∂ffnen
                            </button>
                            <button class="action-btn success" onclick="showMostPopularCocktails()">
                                ‚≠ê Top Cocktails
                            </button>
                            <button class="action-btn" onclick="showIngredientConfiguration()">
                                üß™ Zutaten Setup
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Featured AI Cocktails -->
                <div class="section-title">üåü AI-Empfohlene Cocktails f√ºr Russelcrowe4</div>
                <div class="cocktail-grid" id="featuredCocktails">
                    <!-- Wird dynamisch gef√ºllt -->
                </div>
            </div>
            
            <!-- Mixing Interface Page -->
            <div class="page-content" id="mixing">
                <div class="section-title">ü•§ Professional Mixing Interface</div>
                
                <div class="mixing-interface" id="mixingInterface">
                    <div class="mixing-title">üçπ Cocktail Mixing Station</div>
                    <div class="mixing-cocktail" id="mixingCocktailIcon">ü•§</div>
                    <div class="mixing-status" id="mixingStatus">Bereit f√ºr Cocktail-Zubereitung</div>
                    
                    <div class="mixing-progress" id="mixingProgressContainer" style="display: none;">
                        <div class="mixing-progress-fill" id="mixingProgressFill" style="width: 0%;"></div>
                    </div>
                    
                    <div class="mixing-steps" id="mixingSteps" style="display: none;">
                        <!-- Wird dynamisch gef√ºllt -->
                    </div>
                    
                    <div class="action-grid" style="max-width: 600px; margin: 0 auto;">
                        <button class="action-btn ai full-width" onclick="startRandomCocktail()">
                            üé≤ Zuf√§lligen AI-Cocktail mixen
                        </button>
                        <button class="action-btn success" onclick="startRecommendedCocktail()">
                            üéØ Empfohlenen Cocktail mixen
                        </button>
                        <button class="action-btn warning" onclick="startCustomCocktail()">
                            üõ†Ô∏è Custom Cocktail erstellen
                        </button>
                        <button class="action-btn danger" id="cancelMixingBtn" onclick="cancelMixing()" style="display: none;">
                            ‚ùå Mixing abbrechen
                        </button>
                    </div>
                </div>
                
                <!-- Quick Cocktail Selection -->
                <div class="section-title">‚ö° Quick Selection</div>
                <div class="cocktail-grid" id="quickSelectionCocktails">
                    <!-- Wird dynamisch gef√ºllt -->
                </div>
            </div>
            
            <!-- Pumps Configuration Page -->
            <div class="page-content" id="pumps">
                <div class="section-title">‚öôÔ∏è 10-Pumpen-System Konfiguration</div>
                
                <div class="status-grid">
                    <div class="status-card success">
                        <div class="status-icon">‚öôÔ∏è</div>
                        <div class="status-title">System Status</div>
                        <div class="status-value">OPTIMAL</div>
                        <div class="status-description">10/10 Pumpen online | GPIO funktional</div>
                    </div>
                    
                    <div class="status-card ai">
                        <div class="status-icon">üìä</div>
                        <div class="status-title">Performance</div>
                        <div class="status-value ai">98.7%</div>
                        <div class="status-description">Durchschnittliche Effizienz</div>
                    </div>
                    
                    <div class="status-card">
                        <div class="status-icon">üíß</div>
                        <div class="status-title">Durchfluss</div>
                        <div class="status-value info">2.4L/min</div>
                        <div class="status-description">Gesamtkapazit√§t aller Pumpen</div>
                    </div>
                    
                    <div class="status-card warning">
                        <div class="status-icon">üîß</div>
                        <div class="status-title">Wartung</div>
                        <div class="status-value warning">23 Tage</div>
                        <div class="status-description">Bis zur n√§chsten Wartung</div>
                    </div>
                </div>
                
                <div class="pump-grid" id="pumpGrid">
                    <!-- Wird dynamisch gef√ºllt -->
                </div>
                
                <div class="quick-actions">
                    <h3>üîß Master-Steuerung</h3>
                    <div class="action-grid">
                        <button class="action-btn success" onclick="initializeAllPumps()">
                            üöÄ Alle initialisieren
                        </button>
                        <button class="action-btn warning" onclick="calibrateAllPumps()">
                            üìè Alle kalibrieren
                        </button>
                        <button class="action-btn" onclick="testAllPumps()">
                            üîÑ Alle testen
                        </button>
                        <button class="action-btn danger" onclick="emergencyStopAllPumps()">
                            üõë Notfall-Stopp
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Ingredients Configuration Page -->
            <div class="page-content" id="ingredients">
                <div class="section-title">üß™ Zutaten-Konfiguration</div>
                
                <div class="form-section">
                    <h3>üß™ Neue Zutat hinzuf√ºgen</h3>
                    <div class="form-grid">
                        <div class="input-group">
                            <label for="ingredientName">Zutaten-Name</label>
                            <input type="text" class="form-control" id="ingredientName" placeholder="z.B. Premium Vodka">
                        </div>
                        <div class="input-group">
                            <label for="ingredientPump">Pumpe</label>
                            <select class="form-control" id="ingredientPump">
                                <option value="">Pumpe w√§hlen...</option>
                                <option value="1">Pumpe 1 (GPIO 18)</option>
                                <option value="2">Pumpe 2 (GPIO 19)</option>
                                <option value="3">Pumpe 3 (GPIO 20)</option>
                                <option value="4">Pumpe 4 (GPIO 21)</option>
                                <option value="5">Pumpe 5 (GPIO 22)</option>
                                <option value="6">Pumpe 6 (GPIO 23)</option>
                                <option value="7">Pumpe 7 (GPIO 24)</option>
                                <option value="8">Pumpe 8 (GPIO 25)</option>
                                <option value="9">Pumpe 9 (GPIO 26)</option>
                                <option value="10">Pumpe 10 (GPIO 27)</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="ingredientType">Typ</label>
                            <select class="form-control" id="ingredientType">
                                <option value="spirit">Spirit (Alkohol)</option>
                                <option value="mixer">Mixer (Alkoholfrei)</option>
                                <option value="citrus">Citrus (S√§ure)</option>
                                <option value="sweetener">S√º√üung</option>
                                <option value="bitter">Bitter</option>
                                <option value="liqueur">Lik√∂r</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="ingredientABV">Alkoholgehalt (%)</label>
                            <input type="number" class="form-control" id="ingredientABV" placeholder="0-96" min="0" max="96" step="0.1">
                        </div>
                        <div class="input-group">
                            <label for="ingredientVolume">Verf√ºgbar (ml)</label>
                            <input type="number" class="form-control" id="ingredientVolume" placeholder="0-1000" min="0" max="1000">
                        </div>
                        <div class="input-group" style="display: flex; align-items: end;">
                            <button class="action-btn ai" onclick="addIngredient()" style="width: 100%;">
                                ‚ûï Hinzuf√ºgen
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="section-title">üìã Aktuelle Zutaten-Konfiguration</div>
                <div class="pump-grid" id="ingredientGrid">
                    <!-- Wird dynamisch gef√ºllt -->
                </div>
            </div>
            
            <!-- AI Lab Page -->
            <div class="page-content" id="ai-lab">
                <div class="section-title">üß† Neural Network Laboratory</div>
                
                <div class="form-section ai" id="trainingPanel" style="display: none; border: 2px solid var(--neural-pink);">
                    <div style="text-align: center; margin-bottom: 30px;">
                        <div style="font-size: 2rem; color: var(--neural-pink); margin-bottom: 15px;">üß† Neural Network Training</div>
                        <div style="color: var(--text-secondary);">Deep Learning in Progress...</div>
                    </div>
                    
                    <div style="margin-bottom: 25px;">
                        <div class="progress-label">
                            <span>Training Progress</span>
                            <span id="detailedTrainingProgress">0%</span>
                        </div>
                        <div class="progress-bar" style="height: 20px;">
                            <div class="progress-fill ai" id="detailedTrainingProgressBar" style="width: 0%;">
                                <span style="color: white; font-weight: 600; line-height: 20px;">0%</span>
                            </div>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin-bottom: 25px;">
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; margin-bottom: 10px;">üß†</div>
                            <div style="color: var(--neural-pink); font-weight: 600;">Neural Nodes</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">Processing</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; margin-bottom: 10px;">‚ö°</div>
                            <div style="color: var(--ai-cyan); font-weight: 600;">Synapses</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">Learning</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; margin-bottom: 10px;">üéØ</div>
                            <div style="color: var(--success-green); font-weight: 600;">Accuracy</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;" id="currentAccuracy">0.000</div>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div style="background: var(--glass-white); padding: 20px; border-radius: 15px;">
                            <div style="color: var(--neural-pink); font-weight: 600; margin-bottom: 15px;">üìä Training Metrics</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.6;">
                                ‚Ä¢ Epoch: <span id="currentEpoch">0</span>/1000<br>
                                ‚Ä¢ Loss: <span id="currentLoss">‚àû</span><br>
                                ‚Ä¢ Learning Rate: 0.001<br>
                                ‚Ä¢ Batch Size: 32
                            </div>
                        </div>
                        
                        <div style="background: var(--glass-white); padding: 20px; border-radius: 15px;">
                            <div style="color: var(--ai-cyan); font-weight: 600; margin-bottom: 15px;">üß† Network Info</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.6;">
                                ‚Ä¢ Layers: 4<br>
                                ‚Ä¢ Parameters: 8,352<br>
                                ‚Ä¢ Dataset: 100 cocktails<br>
                                ‚Ä¢ Architecture: Deep Learning
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="quick-actions-grid">
                    <div class="quick-actions">
                        <h3>üß† Core AI Functions</h3>
                        <div class="action-grid">
                            <button class="action-btn ai" onclick="trainAI()">
                                üß† Neural Training
                            </button>
                            <button class="action-btn ai" onclick="generateAIRecipe()">
                                ü§ñ Generate Recipe
                            </button>
                            <button class="action-btn ai" onclick="analyzeUserPreferences()">
                                üëÖ Taste Analysis
                            </button>
                            <button class="action-btn ai" onclick="optimizeCocktailLibrary()">
                                ‚ö° Optimize Library
                            </button>
                        </div>
                    </div>
                    
                    <div class="quick-actions">
                        <h3>üî¨ Advanced AI</h3>
                        <div class="action-grid">
                            <button class="action-btn ai" onclick="deepTrainAI()">
                                üî¨ Deep Training
                            </button>
                            <button class="action-btn ai" onclick="analyzeNeuralPatterns()">
                                üîç Pattern Analysis
                            </button>
                            <button class="action-btn ai" onclick="exportAIModel()">
                                üíæ Export Model
                            </button>
                            <button class="action-btn ai" onclick="benchmarkAI()">
                                üìà Benchmark
                            </button>
                        </div>
                    </div>
                    
                    <div class="quick-actions">
                        <h3>üéØ Personalization</h3>
                        <div class="action-grid">
                            <button class="action-btn success" onclick="getPersonalizedRecommendations()">
                                üéØ Recommendations
                            </button>
                            <button class="action-btn warning" onclick="createFlavorProfile()">
                                üåà Flavor Profile
                            </button>
                            <button class="action-btn" onclick="analyzeCompatibility()">
                                üîó Compatibility
                            </button>
                            <button class="action-btn" onclick="predictUserTrends()">
                                üìà Trend Prediction
                            </button>
                        </div>
                    </div>
                    
                    <div class="quick-actions">
                        <h3>üî¨ Research & Development</h3>
                        <div class="action-grid">
                            <button class="action-btn ai full-width" onclick="researchNewFlavors()">
                                üß™ Research New Flavors
                            </button>
                            <button class="action-btn success" onclick="simulateCocktailVariations()">
                                üîÑ Simulate Variations
                            </button>
                            <button class="action-btn warning" onclick="analyzeIngredientSynergies()">
                                üß¨ Ingredient Synergies
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Cocktails Page -->
            <div class="page-content" id="cocktails">
                <div class="section-title">üçπ 100 AI-Enhanced Cocktails</div>
                <div class="section-subtitle">Entdecke unsere umfangreiche Cocktail-Bibliothek mit AI-generierten und klassischen Rezepten</div>
                
                <div class="form-section">
                    <h3>üîç Cocktail-Filter</h3>
                    <div class="form-grid">
                        <div class="input-group">
                            <label for="cocktailSearch">Suche</label>
                            <input type="text" class="form-control" id="cocktailSearch" placeholder="Cocktail-Name eingeben...">
                        </div>
                        <div class="input-group">
                            <label for="categoryFilter">Kategorie</label>
                            <select class="form-control" id="categoryFilter">
                                <option value="">Alle Kategorien</option>
                                <option value="AI-Kreation">AI-Kreation</option>
                                <option value="Klassiker">Klassiker</option>
                                <option value="Tropical">Tropical</option>
                                <option value="Sour">Sour</option>
                                <option value="Longdrink">Longdrink</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="difficultyFilter">Schwierigkeit</label>
                            <select class="form-control" id="difficultyFilter">
                                <option value="">Alle</option>
                                <option value="1">‚≠ê Einfach</option>
                                <option value="2">‚≠ê‚≠ê Mittel</option>
                                <option value="3">‚≠ê‚≠ê‚≠ê Schwer</option>
                                <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê Expert</option>
                                <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Master</option>
                            </select>
                        </div>
                        <div class="input-group" style="display: flex; align-items: end;">
                            <button class="action-btn success" onclick="filterCocktails()" style="width: 100%;">
                                üîç Filter anwenden
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="cocktail-grid" id="cocktailGrid">
                    <!-- Wird dynamisch gef√ºllt -->
                </div>
            </div>
            
            <!-- Hardware Page -->
            <div class="page-content" id="hardware">
                <div class="section-title">üîß Raspberry Pi 4 Hardware-Integration</div>
                
                <div class="status-grid">
                    <div class="status-card success">
                        <div class="status-icon">ü•ß</div>
                        <div class="status-title">Raspberry Pi 4</div>
                        <div class="status-value">ONLINE</div>
                        <div class="status-description">Model B | 2GB RAM | Raspbian OS</div>
                    </div>
                    
                    <div class="status-card">
                        <div class="status-icon">üì°</div>
                        <div class="status-title">GPIO Status</div>
                        <div class="status-value info">18-27</div>
                        <div class="status-description">10 Pumpen-Pins konfiguriert</div>
                    </div>
                    
                    <div class="status-card warning">
                        <div class="status-icon">üå°Ô∏è</div>
                        <div class="status-title">CPU Temperatur</div>
                        <div class="status-value warning" id="cpuTemp">47¬∞C</div>
                        <div class="status-description">Innerhalb normaler Parameter</div>
                    </div>
                    
                    <div class="status-card">
                        <div class="status-icon">üíæ</div>
                        <div class="status-title">Speicher</div>
                        <div class="status-value info" id="memoryUsage">73%</div>
                        <div class="status-description">1.46GB / 2GB verwendet</div>
                    </div>
                </div>
                
                <div class="quick-actions-grid">
                    <div class="quick-actions">
                        <h3>üîß Hardware-Tests</h3>
                        <div class="action-grid">
                            <button class="action-btn success" onclick="testGPIOPins()">
                                üì° GPIO Test
                            </button>
                            <button class="action-btn" onclick="testSensors()">
                                üîç Sensor Check
                            </button>
                            <button class="action-btn warning" onclick="calibrateHardware()">
                                üìè Hardware-Kalibrierung
                            </button>
                            <button class="action-btn danger" onclick="hardwareReset()">
                                üîÑ Hardware Reset
                            </button>
                        </div>
                    </div>
                    
                    <div class="quick-actions">
                        <h3>üîå Connectivity</h3>
                        <div class="action-grid">
                            <button class="action-btn success" onclick="testNetworkConnection()">
                                üåê Netzwerk Test
                            </button>
                            <button class="action-btn" onclick="testI2CDevices()">
                                üîó I2C Devices
                            </button>
                            <button class="action-btn warning" onclick="testSPIDevices()">
                                üìä SPI Devices
                            </button>
                            <button class="action-btn" onclick="bluetoothStatus()">
                                üì∂ Bluetooth
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="form-section">
                    <h3>ü•ß Raspberry Pi Details</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                        <div>
                            <h4 style="color: var(--primary-silver-light); margin-bottom: 15px;">Hardware Specs</h4>
                            <div style="color: var(--text-secondary); line-height: 1.8;">
                                ‚Ä¢ Modell: Raspberry Pi 4 Model B<br>
                                ‚Ä¢ RAM: 2GB LPDDR4<br>
                                ‚Ä¢ CPU: Quad-core ARM Cortex-A72<br>
                                ‚Ä¢ GPU: VideoCore VI<br>
                                ‚Ä¢ Storage: 32GB microSD<br>
                                ‚Ä¢ GPIO: 40-Pin Header
                            </div>
                        </div>
                        <div>
                            <h4 style="color: var(--primary-silver-light); margin-bottom: 15px;">Cocktail Hardware</h4>
                            <div style="color: var(--text-secondary); line-height: 1.8;">
                                ‚Ä¢ Pumpen: 10x Peristaltik-Pumpen<br>
                                ‚Ä¢ GPIO Pins: 18-27 (PWM-Steuerung)<br>
                                ‚Ä¢ Sensoren: 8x Flow-Sensoren<br>
                                ‚Ä¢ LEDs: 4x Status-LEDs<br>
                                ‚Ä¢ Buttons: 4x Control-Buttons<br>
                                ‚Ä¢ Display: 7" Touchscreen
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Monitoring Page -->
            <div class="page-content" id="monitoring">
                <div class="section-title">üìä System-Monitor & Performance</div>
                
                <div class="status-grid">
                    <div class="status-card">
                        <div class="status-icon">üñ•Ô∏è</div>
                        <div class="status-title">System Load</div>
                        <div class="status-value info" id="systemLoad">23%</div>
                        <div class="status-description">CPU Auslastung niedrig</div>
                        <div class="progress-container">
                            <div class="progress-bar">
                                <div class="progress-fill" id="cpuLoadBar" style="width: 23%;"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="status-card">
                        <div class="status-icon">üíæ</div>
                        <div class="status-title">RAM Usage</div>
                        <div class="status-value warning" id="ramUsage">73%</div>
                        <div class="status-description">1.46GB / 2GB verwendet</div>
                        <div class="progress-container">
                            <div class="progress-bar">
                                <div class="progress-fill warning" id="ramUsageBar" style="width: 73%;"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="status-card">
                        <div class="status-icon">üíø</div>
                        <div class="status-title">Disk Space</div>
                        <div class="status-value success" id="diskUsage">34%</div>
                        <div class="status-description">10.9GB / 32GB verwendet</div>
                        <div class="progress-container">
                            <div class="progress-bar">
                                <div class="progress-fill success" id="diskUsageBar" style="width: 34%;"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="status-card">
                        <div class="status-icon">üåê</div>
                        <div class="status-title">Network</div>
                        <div class="status-value success">ONLINE</div>
                        <div class="status-description">Wi-Fi connected | 87 Mbps</div>
                    </div>
                </div>
                
                <div class="quick-actions">
                    <h3>üìä Monitoring Tools</h3>
                    <div class="action-grid">
                        <button class="action-btn" onclick="refreshSystemStats()">
                            üîÑ Stats aktualisieren
                        </button>
                        <button class="action-btn success" onclick="exportSystemReport()">
                            üìã System-Report
                        </button>
                        <button class="action-btn warning" onclick="clearSystemCache()">
                            üßπ Cache leeren
                        </button>
                        <button class="action-btn danger" onclick="systemMaintenance()">
                            üîß Wartungsmodus
                        </button>
                    </div>
                </div>
                
                <div class="form-section">
                    <h3>üìà Live-Performance-Graph</h3>
                    <div style="height: 300px; background: var(--glass-white); border-radius: 15px; display: flex; align-items: center; justify-content: center; color: var(--text-muted);">
                        <div style="text-align: center;">
                            <div style="font-size: 3rem; margin-bottom: 15px;">üìà</div>
                            <div>Live-Performance-Diagramm</div>
                            <div style="font-size: 0.9rem; margin-top: 10px;">CPU, RAM, Temperatur & Netzwerk</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Logs Page -->
            <div class="page-content" id="logs">
                <div class="section-title">üìù System-Logs & Diagnose</div>
                
                <div class="form-section">
                    <h3>üîç Log-Filter</h3>
                    <div class="form-grid">
                        <div class="input-group">
                            <label for="logLevel">Log Level</label>
                            <select class="form-control" id="logLevel">
                                <option value="">Alle Levels</option>
                                <option value="error">Error</option>
                                <option value="warn">Warning</option>
                                <option value="info">Info</option>
                                <option value="debug">Debug</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="logCategory">Kategorie</label>
                            <select class="form-control" id="logCategory">
                                <option value="">Alle Kategorien</option>
                                <option value="AI_ENGINE">AI Engine</option>
                                <option value="HARDWARE">Hardware</option>
                                <option value="MIXING">Mixing</option>
                                <option value="SYSTEM">System</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="logTimeRange">Zeitraum</label>
                            <select class="form-control" id="logTimeRange">
                                <option value="1h">Letzte Stunde</option>
                                <option value="6h">Letzte 6 Stunden</option>
                                <option value="24h">Letzte 24 Stunden</option>
                                <option value="7d">Letzte 7 Tage</option>
                            </select>
                        </div>
                        <div class="input-group" style="display: flex; align-items: end;">
                            <button class="action-btn success" onclick="filterLogs()" style="width: 100%;">
                                üîç Logs filtern
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="form-section">
                    <h3>üìä Log-Statistiken</h3>
                    <div class="status-grid">
                        <div class="status-card">
                            <div class="status-icon">üìù</div>
                            <div class="status-title">Gesamt Logs</div>
                            <div class="status-value" id="totalLogs">1,247</div>
                        </div>
                        <div class="status-card error">
                            <div class="status-icon">‚ùå</div>
                            <div class="status-title">Errors</div>
                            <div class="status-value error" id="errorLogs">3</div>
                        </div>
                        <div class="status-card warning">
                            <div class="status-icon">‚ö†Ô∏è</div>
                            <div class="status-title">Warnings</div>
                            <div class="status-value warning" id="warningLogs">12</div>
                        </div>
                        <div class="status-card success">
                            <div class="status-icon">‚ÑπÔ∏è</div>
                            <div class="status-title">Info</div>
                            <div class="status-value success" id="infoLogs">1,232</div>
                        </div>
                    </div>
                </div>
                
                <div class="form-section">
                    <h3>üìã Live-Log-Stream</h3>
                    <div id="logContainer" style="background: #000; color: #00ff00; padding: 20px; border-radius: 10px; font-family: 'Courier New', monospace; font-size: 0.85rem; height: 400px; overflow-y: auto; line-height: 1.4;">
                        <div>[2025-05-26 03:51:04] [INFO] [SYSTEM] System successfully initialized</div>
                        <div>[2025-05-26 03:51:04] [INFO] [AI_ENGINE] Neural network loaded - 100 cocktails trained</div>
                        <div>[2025-05-26 03:51:04] [INFO] [HARDWARE] 10 pumps initialized on GPIO 18-27</div>
                        <div>[2025-05-26 03:51:04] [INFO] [MIXING] Mixing interface ready</div>
                        <div>[2025-05-26 03:51:04] [INFO] [USER] User Russelcrowe4 logged in</div>
                        <div>[2025-05-26 03:51:04] [DEBUG] [AI_ENGINE] Loading user preferences for Russelcrowe4</div>
                        <div>[2025-05-26 03:51:04] [INFO] [SYSTEM] All subsystems operational</div>
                    </div>
                    
                    <div class="action-grid" style="margin-top: 20px;">
                        <button class="action-btn" onclick="pauseLogStream()">
                            ‚è∏Ô∏è Log-Stream pausieren
                        </button>
                        <button class="action-btn success" onclick="exportLogs()">
                            üì§ Logs exportieren
                        </button>
                        <button class="action-btn warning" onclick="clearLogs()">
                            üßπ Logs l√∂schen
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Settings Page -->
            <div class="page-content" id="settings">
                <div class="section-title">‚öôÔ∏è System-Einstellungen</div>
                
                <div class="quick-actions-grid">
                    <div class="form-section">
                        <h3>üë§ Benutzer-Einstellungen</h3>
                        <div class="form-grid">
                            <div class="input-group">
                                <label for="userName">Benutzername</label>
                                <input type="text" class="form-control" id="userName" value="Russelcrowe4" readonly>
                            </div>
                            <div class="input-group">
                                <label for="userLanguage">Sprache</label>
                                <select class="form-control" id="userLanguage">
                                    <option value="de">Deutsch</option>
                                    <option value="en">English</option>
                                    <option value="fr">Fran√ßais</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label for="userTheme">Theme</label>
                                <select class="form-control" id="userTheme">
                                    <option value="dark">Dark Mode</option>
                                    <option value="light">Light Mode</option>
                                    <option value="auto">Auto</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h3>ü§ñ AI-Einstellungen</h3>
                        <div class="form-grid">
                            <div class="input-group">
                                <label for="aiConfidenceThreshold">AI-Confidence Threshold</label>
                                <input type="range" class="form-control" id="aiConfidenceThreshold" min="0.5" max="1.0" step="0.05" value="0.85">
                                <div style="color: var(--text-muted); font-size: 0.85rem; margin-top: 5px;">Aktuell: 85%</div>
                            </div>
                            <div class="input-group">
                                <label for="aiLearningRate">Learning Rate</label>
                                <input type="range" class="form-control" id="aiLearningRate" min="0.0001" max="0.01" step="0.0001" value="0.001">
                                <div style="color: var(--text-muted); font-size: 0.85rem; margin-top: 5px;">Aktuell: 0.001</div>
                            </div>
                            <div class="input-group">
                                <label for="aiAutoTraining">Auto-Training</label>
                                <select class="form-control" id="aiAutoTraining">
                                    <option value="enabled">Aktiviert</option>
                                    <option value="disabled">Deaktiviert</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h3>‚öôÔ∏è Hardware-Einstellungen</h3>
                        <div class="form-grid">
                            <div class="input-group">
                                <label for="pumpSpeed">Standard Pumpen-Geschwindigkeit</label>
                                <input type="range" class="form-control" id="pumpSpeed" min="20" max="60" value="45">
                                <div style="color: var(--text-muted); font-size: 0.85rem; margin-top: 5px;">Aktuell: 45 ml/min</div>
                            </div>
                            <div class="input-group">
                                <label for="mixingPrecision">Mixing-Pr√§zision</label>
                                <input type="range" class="form-control" id="mixingPrecision" min="0.1" max="1.0" step="0.1" value="0.2">
                                <div style="color: var(--text-muted); font-size: 0.85rem; margin-top: 5px;">Aktuell: ¬±0.2ml</div>
                            </div>
                            <div class="input-group">
                                <label for="safetyTimeout">Sicherheits-Timeout</label>
                                <select class="form-control" id="safetyTimeout">
                                    <option value="300">5 Minuten</option>
                                    <option value="600" selected>10 Minuten</option>
                                    <option value="1200">20 Minuten</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h3>üîê System-Einstellungen</h3>
                        <div class="form-grid">
                            <div class="input-group">
                                <label for="sessionTimeout">Session-Timeout</label>
                                <select class="form-control" id="sessionTimeout">
                                    <option value="1800">30 Minuten</option>
                                    <option value="3600" selected>1 Stunde</option>
                                    <option value="7200">2 Stunden</option>
                                    <option value="0">Nie</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label for="debugMode">Debug-Modus</label>
                                <select class="form-control" id="debugMode">
                                    <option value="false" selected>Deaktiviert</option>
                                    <option value="true">Aktiviert</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label for="autoSave">Auto-Save Intervall</label>
                                <select class="form-control" id="autoSave">
                                    <option value="60">1 Minute</option>
                                    <option value="300" selected>5 Minuten</option>
                                    <option value="600">10 Minuten</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="action-grid">
                    <button class="action-btn success" onclick="saveSettings()">
                        üíæ Einstellungen speichern
                    </button>
                    <button class="action-btn warning" onclick="resetToDefaults()">
                        üîÑ Auf Standard zur√ºcksetzen
                    </button>
                    <button class="action-btn" onclick="exportSettings()">
                        üì§ Einstellungen exportieren
                    </button>
                    <button class="action-btn" onclick="importSettings()">
                        üì• Einstellungen importieren
                    </button>
                </div>
            </div>
            
        </div>
    </main>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Modal Container -->
    <div class="modal-container" id="modalContainer"></div>
</div>

<script type="module">
    // === COMPLETE JAVASCRIPT SYSTEM ===
    
    // Constants and Configuration
    const CONSTANTS = {
        TOAST_TYPES: {
            SUCCESS: 'success',
            ERROR: 'error',
            WARNING: 'warning',
            INFO: 'info',
            AI: 'ai'
        },
        
        SYSTEM_STATES: {
            INITIALIZING: 'initializing',
            READY: 'ready',
            BUSY: 'busy',
            ERROR: 'error',
            MAINTENANCE: 'maintenance'
        },
        
        PUMP_STATES: {
            ONLINE: 'online',
            OFFLINE: 'offline',
            PUMPING: 'pumping',
            TESTING: 'testing',
            CALIBRATING: 'calibrating',
            ERROR: 'error'
        },
        
        TIMINGS: {
            TOAST_DURATION: 5000,
            LOADING_MIN: 200,
            LOADING_MAX: 800,
            PUMP_TEST_DURATION: 2000,
            CALIBRATION_DURATION: 3000,
            AI_TRAINING_STEP: 50,
            NOTIFICATION_FADE: 300
        },
        
        HARDWARE: {
            PUMP_COUNT: 10,
            GPIO_START: 18,
            GPIO_END: 27,
            MIN_FLOW_RATE: 40,
            MAX_FLOW_RATE: 50,
            MAX_VOLUME: 1000,
            PRECISION: 0.2
        }
    };

    const CONFIG = {
        SYSTEM: {
            version: '7.0.0',
            build: 'production',
            user: 'Russelcrowe4',
            timezone: 'UTC',
            debug: false,
            startTime: '2025-05-26 03:51:04'
        },
        
        AI: {
            model_version: '7.0-production',
            training_epochs: 1000,
            confidence_threshold: 0.85,
            learning_rate: 0.001,
            batch_size: 32,
            neural_layers: [128, 64, 32, 16],
            parameters_count: 8352
        },
        
        HARDWARE: {
            raspberry_pi: 'Pi 4 Model B',
            ram: '2GB LPDDR4',
            pumps: CONSTANTS.HARDWARE.PUMP_COUNT,
            gpio_pins: `${CONSTANTS.HARDWARE.GPIO_START}-${CONSTANTS.HARDWARE.GPIO_END}`
        },
        
        MIXING: {
            max_queue: 5,
            max_mixing_time: 300,
            precision: CONSTANTS.HARDWARE.PRECISION,
            safety_timeout: 600
        }
    };

    // Real Cocktail Database
    const REAL_COCKTAIL_DATABASE = [
        {
            id: 1, name: 'Mojito', category: 'Klassiker', difficulty: 2, popularity: 95,
            ingredients: [
                { name: 'Aged Rum', amount: 50, pump: 3, type: 'spirit', abv: 40 },
                { name: 'Fresh Lime Juice', amount: 25, pump: 7, type: 'citrus' },
                { name: 'Simple Syrup', amount: 15, pump: 8, type: 'sweetener' },
                { name: 'Tonic Water', amount: 150, pump: 10, type: 'mixer' }
            ],
            description: 'Kubanischer Klassiker mit Minze und Limette',
            mixing_time: 45, glass_type: 'Highball', user_rating: 4.7
        },
        {
            id: 2, name: 'Gin & Tonic', category: 'Longdrink', difficulty: 1, popularity: 91,
            ingredients: [
                { name: 'London Dry Gin', amount: 50, pump: 2, type: 'spirit', abv: 42 },
                { name: 'Tonic Water', amount: 150, pump: 10, type: 'mixer' }
            ],
            description: 'Britischer Kolonial-Klassiker',
            mixing_time: 25, glass_type: 'Highball', user_rating: 4.5
        }
        // ... weitere Cocktails w√ºrden hier stehen
    ];

    // Generate additional cocktails programmatically
    const additionalCocktails = [];
    const cocktailNames = [
        'Neural Fusion', 'Quantum Martini', 'AI Paradise', 'Digital Sunset', 'Cyber Mojito',
        'Virtual Reality', 'Binary Bliss', 'Algorithmic Punch', 'Data Stream', 'Code Crusher'
    ];
    
    for (let i = 0; i < 98; i++) {
        const cocktailName = cocktailNames[i % cocktailNames.length] + ` ${Math.floor(i/cocktailNames.length) + 1}`;
        additionalCocktails.push({
            id: i + 3,
            name: cocktailName,
            category: ['AI-Kreation', 'Tropical', 'Klassiker', 'Sour', 'Longdrink'][Math.floor(Math.random() * 5)],
            difficulty: Math.floor(Math.random() * 3) + 2,
            popularity: Math.floor(Math.random() * 30) + 70,
            ingredients: generateRandomIngredients(),
            description: 'AI-generierter Premium Cocktail aus der Professional Collection',
            mixing_time: Math.floor(Math.random() * 60) + 30,
            glass_type: ['Rocks', 'Coupe', 'Highball', 'Martini'][Math.floor(Math.random() * 4)],
            user_rating: Math.random() * 2 + 3,
            aiGenerated: Math.random() > 0.7
        });
    }
    
    REAL_COCKTAIL_DATABASE.push(...additionalCocktails);

    function generateRandomIngredients() {
        const availableIngredients = [
            { name: 'Premium Vodka', pump: 1, type: 'spirit', abv: 40 },
            { name: 'London Dry Gin', pump: 2, type: 'spirit', abv: 42 },
            { name: 'Aged Rum', pump: 3, type: 'spirit', abv: 40 },
            { name: 'Fresh Lime Juice', pump: 7, type: 'citrus' },
            { name: 'Simple Syrup', pump: 8, type: 'sweetener' },
            { name: 'Tonic Water', pump: 10, type: 'mixer' }
        ];
        
        const selectedIngredients = [];
        const ingredientCount = Math.floor(Math.random() * 3) + 2;
        
        for (let i = 0; i < ingredientCount; i++) {
            const ingredient = availableIngredients[Math.floor(Math.random() * availableIngredients.length)];
            if (!selectedIngredients.some(sel => sel.name === ingredient.name)) {
                selectedIngredients.push({
                    name: ingredient.name,
                    amount: ingredient.type === 'spirit' ? Math.floor(Math.random() * 30) + 40 : 
                           ingredient.type === 'mixer' ? Math.floor(Math.random() * 100) + 100 :
                           Math.floor(Math.random() * 20) + 15,
                    pump: ingredient.pump,
                    type: ingredient.type,
                    abv: ingredient.abv || 0
                });
            }
        }
        
        return selectedIngredients;
    }

    // Logger Class
    class Logger {
        constructor() {
            this.logs = [];
            this.maxLogs = 1000;
            this.subscribers = new Set();
        }
        
        log(level, category, message, data = null) {
            const logEntry = {
                timestamp: new Date().toISOString(),
                level: level.toUpperCase(),
                category,
                message,
                data,
                id: Date.now() + Math.random()
            };
            
            this.logs.unshift(logEntry);
            
            if (this.logs.length > this.maxLogs) {
                this.logs = this.logs.slice(0, this.maxLogs);
            }
            
            // Console output
            if (CONFIG.SYSTEM.debug || level === 'error') {
                const consoleMethod = this.getConsoleMethod(level);
                const prefix = `[${logEntry.timestamp}] [${level.toUpperCase()}] [${category}]`;
                
                if (data) {
                    console[consoleMethod](prefix, message, data);
                } else {
                    console[consoleMethod](prefix, message);
                }
            }
            
            // Update live log display
            this.updateLogDisplay(logEntry);
            
            return logEntry;
        }
        
        getConsoleMethod(level) {
            switch (level.toLowerCase()) {
                case 'error': return 'error';
                case 'warn': case 'warning': return 'warn';
                case 'info': return 'info';
                case 'debug': return 'debug';
                default: return 'log';
            }
        }
        
        updateLogDisplay(logEntry) {
            const logContainer = document.getElementById('logContainer');
            if (logContainer) {
                const logLine = document.createElement('div');
                logLine.textContent = `[${logEntry.timestamp}] [${logEntry.level}] [${logEntry.category}] ${logEntry.message}`;
                logContainer.insertBefore(logLine, logContainer.firstChild);
                
                // Keep only last 50 entries in display
                while (logContainer.children.length > 50) {
                    logContainer.removeChild(logContainer.lastChild);
                }
            }
        }
        
        error(category, message, data) {
            return this.log('error', category, message, data);
        }
        
        warn(category, message, data) {
            return this.log('warn', category, message, data);
        }
        
        info(category, message, data) {
            return this.log('info', category, message, data);
        }
        
        debug(category, message, data) {
            return this.log('debug', category, message, data);
        }
    }

    // Global logger instance
    const logger = new Logger();

    // Error Handler Class
    class ErrorHandler {
        constructor() {
            this.errorCounts = new Map();
            this.lastErrors = new Map();
            this.setupGlobalHandlers();
        }
        
        setupGlobalHandlers() {
            window.addEventListener('error', (event) => {
                this.handleError({
                    type: 'JavaScript Error',
                    message: event.message,
                    filename: event.filename,
                    lineno: event.lineno,
                    error: event.error
                });
            });
            
            window.addEventListener('unhandledrejection', (event) => {
                this.handleError({
                    type: 'Promise Rejection',
                    message: event.reason?.message || event.reason,
                    error: event.reason
                });
            });
        }
        
        handleError(errorInfo) {
            const errorId = this.generateErrorId(errorInfo);
            const count = (this.errorCounts.get(errorId) || 0) + 1;
            this.errorCounts.set(errorId, count);
            
            const error = {
                id: errorId,
                timestamp: new Date().toISOString(),
                count,
                ...errorInfo
            };
            
            this.lastErrors.set(errorId, error);
            logger.error('ERROR_HANDLER', `${error.type}: ${error.message}`, error);
            
            if (this.isCriticalError(error)) {
                this.handleCriticalError(error);
            }
            
            return error;
        }
        
        generateErrorId(errorInfo) {
            const key = `${errorInfo.type}_${errorInfo.message}`;
            return btoa(key).slice(0, 16);
        }
        
        isCriticalError(error) {
            const criticalTypes = ['JavaScript Error', 'Promise Rejection'];
            return criticalTypes.includes(error.type) || error.count >= 5;
        }
        
        handleCriticalError(error) {
            logger.error('CRITICAL_ERROR', 'Critical error detected', error);
            showSystemBanner(`Kritischer Fehler: ${error.message}`, 'error');
        }
    }

    // State Manager Class
    class StateManager {
        constructor() {
            this.state = {
                system: {
                    status: CONSTANTS.SYSTEM_STATES.INITIALIZING,
                    version: CONFIG.SYSTEM.version,
                    user: CONFIG.SYSTEM.user,
                    startTime: CONFIG.SYSTEM.startTime,
                    lastUpdate: new Date().toISOString()
                },
                pumps: new Map(),
                ingredients: new Map(),
           mixing: {
                active: false,
                queue: [],
                currentCocktail: null,
                progress: 0
            },
            ai: {
                status: CONSTANTS.AI_STATES.IDLE,
                confidence: 0.968,
                generatedCount: 0,
                trainingProgress: 100
            },
            ui: {
                currentPage: 'dashboard',
                notifications: [],
                modals: []
            }
        };
        
        this.subscribers = new Map();
        this.initializePumps();
        this.initializeIngredients();
        
        logger.info('STATE_MANAGER', 'State manager initialized');
    }
    
    initializePumps() {
        for (let i = 1; i <= CONSTANTS.HARDWARE.PUMP_COUNT; i++) {
            this.state.pumps.set(i, {
                id: i,
                gpio: CONSTANTS.HARDWARE.GPIO_START + i - 1,
                status: CONSTANTS.PUMP_STATES.ONLINE,
                ingredient: null,
                flowRate: Math.floor(Math.random() * 10) + 40,
                totalRuntime: Math.floor(Math.random() * 1000) + 500,
                lastCalibration: new Date().toISOString(),
                maintenanceScore: Math.random() * 20 + 80
            });
        }
    }
    
    initializeIngredients() {
        const defaultIngredients = [
            { name: 'Premium Vodka', type: 'spirit', abv: 40, volume: 750, pump: 1 },
            { name: 'London Dry Gin', type: 'spirit', abv: 42, volume: 700, pump: 2 },
            { name: 'Aged Rum', type: 'spirit', abv: 40, volume: 800, pump: 3 },
            { name: 'Bourbon Whiskey', type: 'spirit', abv: 45, volume: 750, pump: 4 },
            { name: 'Tequila Blanco', type: 'spirit', abv: 40, volume: 700, pump: 5 },
            { name: 'Cointreau', type: 'liqueur', abv: 40, volume: 500, pump: 6 },
            { name: 'Fresh Lime Juice', type: 'citrus', abv: 0, volume: 1000, pump: 7 },
            { name: 'Simple Syrup', type: 'sweetener', abv: 0, volume: 1000, pump: 8 },
            { name: 'Angostura Bitter', type: 'bitter', abv: 44, volume: 200, pump: 9 },
            { name: 'Tonic Water', type: 'mixer', abv: 0, volume: 1000, pump: 10 }
        ];
        
        defaultIngredients.forEach(ingredient => {
            this.state.ingredients.set(ingredient.pump, ingredient);
        });
    }
    
    setState(path, value) {
        this.setNestedValue(this.state, path, value);
        this.state.system.lastUpdate = new Date().toISOString();
        this.notifySubscribers(path, value);
    }
    
    getState(path) {
        return this.getNestedValue(this.state, path);
    }
    
    setNestedValue(obj, path, value) {
        const keys = path.split('.');
        let current = obj;
        
        for (let i = 0; i < keys.length - 1; i++) {
            const key = keys[i];
            if (!(key in current) || typeof current[key] !== 'object') {
                current[key] = {};
            }
            current = current[key];
        }
        
        current[keys[keys.length - 1]] = value;
    }
    
    getNestedValue(obj, path) {
        return path.split('.').reduce((current, key) => {
            return current && typeof current === 'object' ? current[key] : undefined;
        }, obj);
    }
    
    subscribe(path, callback) {
        if (!this.subscribers.has(path)) {
            this.subscribers.set(path, new Set());
        }
        
        this.subscribers.get(path).add(callback);
        
        return () => {
            const pathSubscribers = this.subscribers.get(path);
            if (pathSubscribers) {
                pathSubscribers.delete(callback);
                if (pathSubscribers.size === 0) {
                    this.subscribers.delete(path);
                }
            }
        };
    }
    
    notifySubscribers(path, value) {
        const pathSubscribers = this.subscribers.get(path);
        if (pathSubscribers) {
            pathSubscribers.forEach(callback => {
                try {
                    callback(value, path);
                } catch (error) {
                    logger.error('STATE_MANAGER', 'Subscriber callback failed', error);
                }
            });
        }
    }
}

// AI Engine Class
class AIEngine {
    constructor(stateManager) {
        this.stateManager = stateManager;
        this.isTraining = false;
        this.trainingProgress = 0;
        this.cocktailDatabase = [...REAL_COCKTAIL_DATABASE];
        this.aiGeneratedCocktails = [];
        
        logger.info('AI_ENGINE', 'AI Engine initialized');
    }
    
    async trainNeuralNetwork() {
        if (this.isTraining) {
            showToast('‚ö†Ô∏è Training bereits aktiv!', CONSTANTS.TOAST_TYPES.WARNING);
            return;
        }
        
        this.isTraining = true;
        this.trainingProgress = 0;
        
        showToast('üß† Neural Network Training gestartet...', CONSTANTS.TOAST_TYPES.AI);
        logger.info('AI_ENGINE', 'Starting neural network training');
        
        const trainingPanel = document.getElementById('trainingPanel');
        if (trainingPanel) trainingPanel.style.display = 'block';
        
        for (let epoch = 0; epoch < CONFIG.AI.training_epochs; epoch++) {
            this.trainingProgress = ((epoch + 1) / CONFIG.AI.training_epochs) * 100;
            this.updateTrainingProgress(epoch);
            
            if (epoch % 50 === 0) {
                await new Promise(resolve => setTimeout(resolve, 100));
            }
        }
        
        await this.finalizeTraining();
    }
    
    updateTrainingProgress(epoch) {
        const progressBar = document.getElementById('detailedTrainingProgressBar');
        const progressText = document.getElementById('detailedTrainingProgress');
        const epochEl = document.getElementById('currentEpoch');
        const accuracyEl = document.getElementById('currentAccuracy');
        const lossEl = document.getElementById('currentLoss');
        
        if (progressBar) {
            progressBar.style.width = `${this.trainingProgress}%`;
            progressBar.querySelector('span').textContent = `${Math.round(this.trainingProgress)}%`;
        }
        
        if (progressText) progressText.textContent = `${Math.round(this.trainingProgress)}%`;
        if (epochEl) epochEl.textContent = epoch + 1;
        if (accuracyEl) accuracyEl.textContent = (0.85 + (this.trainingProgress / 100) * 0.12).toFixed(3);
        if (lossEl) lossEl.textContent = (2.5 * Math.exp(-this.trainingProgress / 20)).toFixed(4);
        
        // Update main dashboard
        const mainProgressBar = document.getElementById('trainingProgressBar');
        const mainProgressText = document.getElementById('trainingProgressText');
        
        if (mainProgressBar) mainProgressBar.style.width = `${this.trainingProgress}%`;
        if (mainProgressText) mainProgressText.textContent = `${Math.round(this.trainingProgress)}%`;
    }
    
    async finalizeTraining() {
        this.isTraining = false;
        this.trainingProgress = 100;
        
        const trainingPanel = document.getElementById('trainingPanel');
        if (trainingPanel) {
            setTimeout(() => trainingPanel.style.display = 'none', 3000);
        }
        
        showToast('‚úÖ Neural Network Training abgeschlossen!', CONSTANTS.TOAST_TYPES.AI);
        logger.info('AI_ENGINE', 'Neural network training completed');
        
        // Update AI status
        const aiStatus = document.getElementById('aiStatus');
        const aiConfidence = document.getElementById('aiConfidenceDisplay');
        
        if (aiStatus) aiStatus.textContent = 'HOCHOPTIMIERT';
        if (aiConfidence) aiConfidence.textContent = '97.3%';
        
        this.generateInitialAICocktails();
    }
    
    generatePersonalizedCocktail() {
        const aiCocktail = {
            id: Date.now(),
            name: this.generateCocktailName(),
            category: 'AI-Kreation',
            difficulty: Math.floor(Math.random() * 2) + 4,
            popularity: Math.floor(Math.random() * 10) + 90,
            ingredients: this.generateOptimalIngredients(),
            description: `Exklusiv f√ºr ${CONFIG.SYSTEM.user} generierter AI-Cocktail`,
            mixing_time: Math.floor(Math.random() * 30) + 45,
            glass_type: 'Neural Sphere',
            aiGenerated: true,
            aiConfidence: 0.85 + Math.random() * 0.12,
            generatedAt: new Date().toISOString(),
            personalizedFor: CONFIG.SYSTEM.user
        };
        
        this.aiGeneratedCocktails.push(aiCocktail);
        this.cocktailDatabase.push(aiCocktail);
        
        logger.info('AI_ENGINE', `Generated AI cocktail: ${aiCocktail.name}`);
        
        return aiCocktail;
    }
    
    generateCocktailName() {
        const adjectives = ['Neural', 'Quantum', 'Digital', 'Cyber', 'Virtual', 'AI', 'Smart', 'Adaptive'];
        const nouns = ['Fusion', 'Matrix', 'Protocol', 'Algorithm', 'Network', 'System', 'Interface', 'Process'];
        
        return `${adjectives[Math.floor(Math.random() * adjectives.length)]} ${nouns[Math.floor(Math.random() * nouns.length)]}`;
    }
    
    generateOptimalIngredients() {
        const availableIngredients = Array.from(this.stateManager.state.ingredients.values());
        const ingredients = [];
        
        // Select spirit
        const spirits = availableIngredients.filter(ing => ing.type === 'spirit');
        const selectedSpirit = spirits[Math.floor(Math.random() * spirits.length)];
        
        ingredients.push({
            name: selectedSpirit.name,
            amount: Math.floor(Math.random() * 20) + 40,
            pump: selectedSpirit.pump,
            type: 'spirit',
            abv: selectedSpirit.abv
        });
        
        // Add citrus
        const citrus = availableIngredients.find(ing => ing.type === 'citrus');
        if (citrus) {
            ingredients.push({
                name: citrus.name,
                amount: Math.floor(Math.random() * 15) + 15,
                pump: citrus.pump,
                type: 'citrus'
            });
        }
        
        // Add sweetener
        const sweetener = availableIngredients.find(ing => ing.type === 'sweetener');
        if (sweetener) {
            ingredients.push({
                name: sweetener.name,
                amount: Math.floor(Math.random() * 10) + 10,
                pump: sweetener.pump,
                type: 'sweetener'
            });
        }
        
        // Add mixer
        const mixer = availableIngredients.find(ing => ing.type === 'mixer');
        if (mixer) {
            ingredients.push({
                name: mixer.name,
                amount: Math.floor(Math.random() * 50) + 100,
                pump: mixer.pump,
                type: 'mixer'
            });
        }
        
        return ingredients;
    }
    
    generateInitialAICocktails() {
        for (let i = 0; i < 5; i++) {
            this.generatePersonalizedCocktail();
        }
        
        const aiGenerated = document.getElementById('aiGenerated');
        if (aiGenerated) aiGenerated.textContent = this.aiGeneratedCocktails.length;
    }
    
    getPersonalizedRecommendations(count = 6) {
        const scoredCocktails = this.cocktailDatabase.map(cocktail => {
            let score = (cocktail.popularity || 50) / 100;
            
            if (cocktail.aiGenerated) {
                score += 0.2;
            }
            
            return { ...cocktail, aiRecommendationScore: score };
        });
        
        return scoredCocktails
            .sort((a, b) => b.aiRecommendationScore - a.aiRecommendationScore)
            .slice(0, count);
    }
}

// Hardware Manager Class
class HardwareManager {
    constructor(stateManager) {
        this.stateManager = stateManager;
        this.mixingActive = false;
        this.currentMixingProgress = 0;
        
        logger.info('HARDWARE', 'Hardware manager initialized');
    }
    
    async testPump(pumpId) {
        const pump = this.stateManager.state.pumps.get(pumpId);
        if (!pump) {
            logger.error('HARDWARE', `Pump ${pumpId} not found`);
            return false;
        }
        
        showToast(`‚öôÔ∏è Teste Pumpe ${pumpId}...`, CONSTANTS.TOAST_TYPES.INFO);
        logger.info('HARDWARE', `Testing pump ${pumpId}`);
        
        pump.status = CONSTANTS.PUMP_STATES.TESTING;
        this.updatePumpDisplay();
        
        await new Promise(resolve => setTimeout(resolve, CONSTANTS.TIMINGS.PUMP_TEST_DURATION));
        
        pump.status = CONSTANTS.PUMP_STATES.ONLINE;
        pump.lastTest = new Date().toISOString();
        this.updatePumpDisplay();
        
        showToast(`‚úÖ Pumpe ${pumpId} Test erfolgreich!`, CONSTANTS.TOAST_TYPES.SUCCESS);
        logger.info('HARDWARE', `Pump ${pumpId} test completed successfully`);
        
        return true;
    }
    
    async calibratePump(pumpId) {
        const pump = this.stateManager.state.pumps.get(pumpId);
        if (!pump) {
            logger.error('HARDWARE', `Pump ${pumpId} not found`);
            return false;
        }
        
        showToast(`üìè Kalibriere Pumpe ${pumpId}...`, CONSTANTS.TOAST_TYPES.WARNING);
        logger.info('HARDWARE', `Calibrating pump ${pumpId}`);
        
        pump.status = CONSTANTS.PUMP_STATES.CALIBRATING;
        this.updatePumpDisplay();
        
        await new Promise(resolve => setTimeout(resolve, CONSTANTS.TIMINGS.CALIBRATION_DURATION));
        
        pump.flowRate = Math.floor(Math.random() * 10) + 40;
        pump.calibrated = true;
        pump.lastCalibration = new Date().toISOString();
        pump.status = CONSTANTS.PUMP_STATES.ONLINE;
        this.updatePumpDisplay();
        
        showToast(`‚úÖ Pumpe ${pumpId} kalibriert - ${pump.flowRate}ml/min`, CONSTANTS.TOAST_TYPES.SUCCESS);
        logger.info('HARDWARE', `Pump ${pumpId} calibrated to ${pump.flowRate}ml/min`);
        
        return true;
    }
    
    async startMixing(cocktail) {
        if (this.mixingActive) {
            showToast('‚ö†Ô∏è Mixing bereits aktiv!', CONSTANTS.TOAST_TYPES.WARNING);
            return false;
        }
        
        this.mixingActive = true;
        this.currentMixingProgress = 0;
        
        logger.info('MIXING', `Starting to mix: ${cocktail.name}`);
        
        // Update mixing interface
        this.updateMixingInterface(cocktail);
        
        showToast(`üçπ Starte Zubereitung: ${cocktail.name}`, CONSTANTS.TOAST_TYPES.AI);
        
        // Execute mixing process
        await this.executeMixingProcess(cocktail);
        
        return true;
    }
    
    updateMixingInterface(cocktail) {
        const elements = {
            mixingInterface: document.getElementById('mixingInterface'),
            mixingStatus: document.getElementById('mixingStatus'),
            mixingCocktailIcon: document.getElementById('mixingCocktailIcon'),
            mixingProgressContainer: document.getElementById('mixingProgressContainer'),
            mixingSteps: document.getElementById('mixingSteps'),
            cancelBtn: document.getElementById('cancelMixingBtn')
        };
        
        if (elements.mixingInterface) elements.mixingInterface.classList.add('active');
        if (elements.mixingStatus) elements.mixingStatus.textContent = `Bereite ${cocktail.name} zu...`;
        if (elements.mixingCocktailIcon) elements.mixingCocktailIcon.textContent = 'üçπ';
        if (elements.mixingProgressContainer) elements.mixingProgressContainer.style.display = 'block';
        if (elements.cancelBtn) elements.cancelBtn.style.display = 'block';
        
        if (elements.mixingSteps) {
            elements.mixingSteps.style.display = 'block';
            elements.mixingSteps.innerHTML = this.generateMixingSteps(cocktail);
        }
    }
    
    generateMixingSteps(cocktail) {
        let steps = '<div class="mixing-step active"><span class="mixing-step-icon">üîÑ</span>System initialisieren...</div>';
        
        cocktail.ingredients.forEach((ingredient, index) => {
            steps += `<div class="mixing-step pending" id="step-${index}">
                <span class="mixing-step-icon">‚è≥</span>
                ${ingredient.amount}ml ${ingredient.name} (Pumpe ${ingredient.pump})
            </div>`;
        });
        
        steps += '<div class="mixing-step pending" id="step-final"><span class="mixing-step-icon">‚è≥</span>Mixing abschlie√üen...</div>';
        
        return steps;
    }
    
    async executeMixingProcess(cocktail) {
        const totalSteps = cocktail.ingredients.length + 2;
        let currentStep = 0;
        
        // Initialize
        await this.updateMixingStep(currentStep, totalSteps);
        await new Promise(resolve => setTimeout(resolve, 1000));
        
        // Process each ingredient
        for (let i = 0; i < cocktail.ingredients.length; i++) {
            currentStep++;
            const ingredient = cocktail.ingredients[i];
            
            const pump = this.stateManager.state.pumps.get(ingredient.pump);
            if (pump) {
                pump.status = CONSTANTS.PUMP_STATES.PUMPING;
                this.updatePumpDisplay();
                
                showToast(`‚öôÔ∏è Pumpe ${ingredient.pump}: ${ingredient.amount}ml ${ingredient.name}`, CONSTANTS.TOAST_TYPES.INFO);
            }
            
            // Update step status
            const stepElement = document.getElementById(`step-${i}`);
            if (stepElement) {
                stepElement.classList.remove('pending');
                stepElement.classList.add('active');
                stepElement.querySelector('.mixing-step-icon').textContent = 'üîÑ';
            }
            
            await this.updateMixingStep(currentStep, totalSteps);
            
            // Simulate pumping time
            const pumpingTime = (ingredient.amount / (pump?.flowRate || 45)) * 60 * 1000;
            await new Promise(resolve => setTimeout(resolve, Math.min(pumpingTime, 3000)));
            
            // Complete step
            if (stepElement) {
                stepElement.classList.remove('active');
                stepElement.classList.add('completed');
                stepElement.querySelector('.mixing-step-icon').textContent = '‚úÖ';
            }
            
            if (pump) {
                pump.status = CONSTANTS.PUMP_STATES.ONLINE;
                pump.totalRuntime += Math.ceil(pumpingTime / 1000);
                this.updatePumpDisplay();
            }
        }
        
        // Finalize
        currentStep++;
        const finalStep = document.getElementById('step-final');
        if (finalStep) {
            finalStep.classList.remove('pending');
            finalStep.classList.add('active');
            finalStep.querySelector('.mixing-step-icon').textContent = 'üîÑ';
        }
        
        await this.updateMixingStep(currentStep, totalSteps);
        await new Promise(resolve => setTimeout(resolve, 2000));
        
        if (finalStep) {
            finalStep.classList.remove('active');
            finalStep.classList.add('completed');
            finalStep.querySelector('.mixing-step-icon').textContent = '‚úÖ';
        }
        
        await this.finalizeMixing(cocktail);
    }
    
    async updateMixingStep(currentStep, totalSteps) {
        this.currentMixingProgress = (currentStep / totalSteps) * 100;
        
        const progressFill = document.getElementById('mixingProgressFill');
        if (progressFill) {
            progressFill.style.width = `${this.currentMixingProgress}%`;
        }
        
        const capacityBar = document.getElementById('capacityBar');
        const capacityPercent = document.getElementById('capacityPercent');
        
        if (capacityBar) capacityBar.style.width = `${this.currentMixingProgress}%`;
        if (capacityPercent) capacityPercent.textContent = `${Math.round(this.currentMixingProgress)}%`;
    }
    
    async finalizeMixing(cocktail) {
        const elements = {
            mixingInterface: document.getElementById('mixingInterface'),
            mixingStatus: document.getElementById('mixingStatus'),
            mixingProgressContainer: document.getElementById('mixingProgressContainer'),
            mixingSteps: document.getElementById('mixingSteps'),
            cancelBtn: document.getElementById('cancelMixingBtn')
        };
        
        if (elements.mixingStatus) {
            elements.mixingStatus.textContent = `${cocktail.name} fertig zubereitet!`;
        }
        
        showToast(`‚úÖ ${cocktail.name} erfolgreich zubereitet!`, CONSTANTS.TOAST_TYPES.SUCCESS);
        logger.info('MIXING', `Successfully completed mixing: ${cocktail.name}`);
        
        // Reset after delay
        setTimeout(() => {
            this.mixingActive = false;
            this.currentMixingProgress = 0;
            
            if (elements.mixingInterface) elements.mixingInterface.classList.remove('active');
            if (elements.mixingStatus) elements.mixingStatus.textContent = 'Bereit f√ºr Cocktail-Zubereitung';
            if (elements.mixingProgressContainer) elements.mixingProgressContainer.style.display = 'none';
            if (elements.mixingSteps) elements.mixingSteps.style.display = 'none';
            if (elements.cancelBtn) elements.cancelBtn.style.display = 'none';
            
            this.updatePumpDisplay();
        }, 5000);
    }
    
    updatePumpDisplay() {
        const pumpGrid = document.getElementById('pumpGrid');
        if (!pumpGrid) return;
        
        pumpGrid.innerHTML = '';
        
        this.stateManager.state.pumps.forEach(pump => {
            const ingredient = this.stateManager.state.ingredients.get(pump.id);
            const pumpCard = document.createElement('div');
            pumpCard.className = `pump-card ${pump.status}`;
            
            pumpCard.innerHTML = `
                <div class="pump-header">
                    <div class="pump-title">${pump.name || `Pumpe ${pump.id}`} (GPIO ${pump.gpio})</div>
                    <div class="pump-status ${pump.status}">${pump.status.toUpperCase()}</div>
                </div>
                
                <div class="pump-info">
                    <div class="pump-info-item">
                        <span class="pump-info-label">Zutat:</span>
                        <span class="pump-info-value">${ingredient ? ingredient.name : 'Nicht konfiguriert'}</span>
                    </div>
                    <div class="pump-info-item">
                        <span class="pump-info-label">Durchfluss:</span>
                        <span class="pump-info-value">${pump.flowRate}ml/min</span>
                    </div>
                    <div class="pump-info-item">
                        <span class="pump-info-label">Laufzeit:</span>
                        <span class="pump-info-value">${pump.totalRuntime || 0}s</span>
                    </div>
                    <div class="pump-info-item">
                        <span class="pump-info-label">Wartung:</span>
                        <span class="pump-info-value">${pump.maintenanceScore?.toFixed(1) || 0}%</span>
                    </div>
                </div>
                
                <div class="pump-controls">
                    <button class="pump-btn success" onclick="hardwareManager.testPump(${pump.id})">
                        üîÑ Test
                    </button>
                    <button class="pump-btn warning" onclick="hardwareManager.calibratePump(${pump.id})">
                        üìè Kalibrieren
                    </button>
                    <button class="pump-btn danger" onclick="emergencyStopPump(${pump.id})">
                        üõë Stopp
                    </button>
                </div>
            `;
            
            pumpGrid.appendChild(pumpCard);
        });
    }
    
    updateIngredientDisplay() {
        const ingredientGrid = document.getElementById('ingredientGrid');
        if (!ingredientGrid) return;
        
        ingredientGrid.innerHTML = '';
        
        this.stateManager.state.ingredients.forEach((ingredient, pumpId) => {
            const pump = this.stateManager.state.pumps.get(pumpId);
            const ingredientCard = document.createElement('div');
            ingredientCard.className = 'pump-card';
            
            ingredientCard.innerHTML = `
                <div class="pump-header">
                    <div class="pump-title">${ingredient.name}</div>
                    <div class="pump-status ${pump?.status || 'offline'}">${pump?.status?.toUpperCase() || 'OFFLINE'}</div>
                </div>
                
                <div class="pump-info">
                    <div class="pump-info-item">
                        <span class="pump-info-label">Typ:</span>
                        <span class="pump-info-value">${ingredient.type}</span>
                    </div>
                    <div class="pump-info-item">
                        <span class="pump-info-label">Alkohol:</span>
                        <span class="pump-info-value">${ingredient.abv}%</span>
                    </div>
                    <div class="pump-info-item">
                        <span class="pump-info-label">Verf√ºgbar:</span>
                        <span class="pump-info-value">${ingredient.volume}ml</span>
                    </div>
                    <div class="pump-info-item">
                        <span class="pump-info-label">Pumpe:</span>
                        <span class="pump-info-value">Pumpe ${pumpId} (GPIO ${pump?.gpio || 'N/A'})</span>
                    </div>
                </div>
                
                <div class="pump-controls">
                    <button class="pump-btn warning" onclick="editIngredient(${pumpId})">
                        ‚úèÔ∏è Bearbeiten
                    </button>
                    <button class="pump-btn danger" onclick="removeIngredient(${pumpId})">
                        üóëÔ∏è Entfernen
                    </button>
                </div>
            `;
            
            ingredientGrid.appendChild(ingredientCard);
        });
    }
}

// Cocktail Manager Class
class CocktailManager {
    constructor(stateManager) {
        this.stateManager = stateManager;
        this.cocktails = [...REAL_COCKTAIL_DATABASE];
        this.filteredCocktails = [...this.cocktails];
        
        logger.info('COCKTAIL_MANAGER', 'Cocktail manager initialized');
    }
    
    displayFeaturedCocktails() {
        const grid = document.getElementById('featuredCocktails');
        if (!grid) return;
        
        grid.innerHTML = '';
        
        const featured = this.getPersonalizedRecommendations(6);
        
        featured.forEach((cocktail, index) => {
            const card = this.createCocktailCard(cocktail);
            card.style.animationDelay = `${index * 0.1}s`;
            grid.appendChild(card);
        });
    }
    
    displayCocktails() {
        const grid = document.getElementById('cocktailGrid');
        if (!grid) return;
        
        grid.innerHTML = '';
        
        this.filteredCocktails.slice(0, 24).forEach((cocktail, index) => {
            const card = this.createCocktailCard(cocktail);
            card.style.animationDelay = `${index * 0.05}s`;
            grid.appendChild(card);
        });
    }
    
    displayQuickSelectionCocktails() {
        const grid = document.getElementById('quickSelectionCocktails');
        if (!grid) return;
        
        grid.innerHTML = '';
        
        const quickSelection = this.cocktails.filter(c => c.mixing_time <= 45).slice(0, 8);
        
        quickSelection.forEach((cocktail, index) => {
            const card = this.createCocktailCard(cocktail, true);
            card.style.animationDelay = `${index * 0.1}s`;
            grid.appendChild(card);
        });
    }
    
    createCocktailCard(cocktail, quickMix = false) {
        const card = document.createElement('div');
        card.className = `cocktail-card ${cocktail.aiGenerated ? 'ai-generated' : ''}`;
        
        if (quickMix) {
            card.onclick = () => this.startMixingCocktail(cocktail);
        } else {
            card.onclick = () => this.showCocktailDetails(cocktail);
        }
        
        const stars = '‚≠ê'.repeat(cocktail.difficulty);
        
        card.innerHTML = `
            <div class="cocktail-image ${cocktail.aiGenerated ? 'ai-generated' : ''}">
                ${cocktail.aiGenerated ? 'ü§ñ' : 'üçπ'}
            </div>
            <div class="cocktail-info">
                <div class="cocktail-name">${cocktail.name}</div>
                <div class="cocktail-meta">
                    ${cocktail.category} | ${stars}
                    ${cocktail.aiGenerated ? ' | ü§ñ AI' : ''}
                </div>
                <div class="cocktail-description">
                    ${cocktail.description}
                </div>
                ${quickMix ? `
                    <div class="cocktail-stats">
                        <div class="cocktail-stat">
                            <span class="cocktail-stat-value">‚ö° ${cocktail.mixing_time}s</span>
                            Quick Mix
                        </div>
                    </div>
                ` : ''}
                ${cocktail.aiGenerated ? `
                    <div class="cocktail-stats">
                        <div class="cocktail-stat">
                            <span class="cocktail-stat-value">üéØ ${(cocktail.aiConfidence * 100).toFixed(1)}%</span>
                            AI-Confidence
                        </div>
                    </div>
                ` : ''}
            </div>
        `;
        
        return card;
    }
    
    showCocktailDetails(cocktail) {
        const ingredientsList = cocktail.ingredients.map(ing => 
            `<div class="pump-info-item">
                <span class="pump-info-label">üß™ ${ing.amount}ml ${ing.name}</span>
                <span class="pump-info-value">${ing.pump ? `Pumpe ${ing.pump}` : ''}</span>
            </div>`
        ).join('');
        
        let aiSection = '';
        if (cocktail.aiGenerated) {
            aiSection = `
                <div class="form-section ai">
                    <h3>ü§ñ AI Neural Network Analyse</h3>
                    <div class="pump-info">
                        <div class="pump-info-item">
                            <span class="pump-info-label">AI-Confidence:</span>
                            <span class="pump-info-value">${(cocktail.aiConfidence * 100).toFixed(1)}%</span>
                        </div>
                        <div class="pump-info-item">
                            <span class="pump-info-label">Personalisiert f√ºr:</span>
                            <span class="pump-info-value">${cocktail.personalizedFor}</span>
                        </div>
                        <div class="pump-info-item">
                            <span class="pump-info-label">Generiert:</span>
                            <span class="pump-info-value">${new Date(cocktail.generatedAt).toLocaleString()}</span>
                        </div>
                    </div>
                </div>
            `;
        }
        
        const content = `
            <div style="text-align: center; margin-bottom: 30px;">
                <div style="font-size: 4rem; margin-bottom: 20px;">
                    ${cocktail.aiGenerated ? 'ü§ñ' : 'üçπ'}
                </div>
                <div class="cocktail-name" style="font-size: 2rem; margin-bottom: 15px;">${cocktail.name}</div>
                <div class="cocktail-meta" style="font-size: 1.1rem; margin-bottom: 10px;">${cocktail.category}</div>
                <div style="font-size: 1.5rem; margin: 15px 0;">${'‚≠ê'.repeat(cocktail.difficulty)}</div>
                <div class="cocktail-description" style="font-style: italic; margin: 20px 0;">"${cocktail.description}"</div>
            </div>
            
            ${aiSection}
            
            <div class="form-section">
                <h3>üß™ Zutaten & Pumpen-Zuordnung</h3>
                <div class="pump-info">
                    ${ingredientsList}
                </div>
            </div>
            
            <div class="form-section">
                <h3>üìä Mixing-Informationen</h3>
                <div class="pump-info">
                    <div class="pump-info-item">
                        <span class="pump-info-label">Mixing-Zeit:</span>
                        <span class="pump-info-value">${cocktail.mixing_time}s</span>
                    </div>
                    <div class="pump-info-item">
                        <span class="pump-info-label">Schwierigkeit:</span>
                        <span class="pump-info-value">${cocktail.difficulty}/5</span>
                    </div>
                    <div class="pump-info-item">
                        <span class="pump-info-label">Glas-Typ:</span>
                        <span class="pump-info-value">${cocktail.glass_type}</span>
                    </div>
                    <div class="pump-info-item">
                        <span class="pump-info-label">Beliebtheit:</span>
                        <span class="pump-info-value">${cocktail.popularity}%</span>
                    </div>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button class="action-btn ${cocktail.aiGenerated ? 'ai' : 'success'} full-width" 
                        onclick="cocktailManager.startMixingCocktail(cocktailManager.cocktails.find(c => c.id === ${cocktail.id}))">
                    üçπ ${cocktail.name} jetzt mixen (${cocktail.mixing_time}s)
                </button>
            </div>
        `;
        
        showModal('üçπ Cocktail Details', content, cocktail.aiGenerated ? 'ai' : 'default');
    }
    
    async startMixingCocktail(cocktail) {
        hideModal();
        
        // Check ingredient availability
        const missingIngredients = cocktail.ingredients.filter(ing => {
            if (!ing.pump) return true;
            const ingredient = this.stateManager.state.ingredients.get(ing.pump);
            return !ingredient || ingredient.volume < ing.amount;
        });
        
        if (missingIngredients.length > 0) {
            showToast(`‚ùå Fehlende Zutaten: ${missingIngredients.map(ing => ing.name).join(', ')}`, CONSTANTS.TOAST_TYPES.ERROR);
            return;
        }
        
        // Switch to mixing page
        showPage('mixing');
        
        // Start mixing process
        await hardwareManager.startMixing(cocktail);
        
        // Update ingredient volumes
        cocktail.ingredients.forEach(ing => {
            if (ing.pump) {
                const ingredient = this.stateManager.state.ingredients.get(ing.pump);
                if (ingredient) {
                    ingredient.volume = Math.max(0, ingredient.volume - ing.amount);
                }
            }
        });
        
        hardwareManager.updateIngredientDisplay();
    }
    
    getPersonalizedRecommendations(count = 6) {
        const scoredCocktails = this.cocktails.map(cocktail => {
            let score = (cocktail.popularity || 50) / 100;
            
            if (cocktail.aiGenerated) {
                score += 0.2;
            }
            
            return { ...cocktail, aiRecommendationScore: score };
        });
        
        return scoredCocktails
            .sort((a, b) => b.aiRecommendationScore - a.aiRecommendationScore)
            .slice(0, count);
    }
    
    filterCocktails() {
        const searchTerm = document.getElementById('cocktailSearch')?.value.toLowerCase() || '';
        const categoryFilter = document.getElementById('categoryFilter')?.value || '';
        const difficultyFilter = document.getElementById('difficultyFilter')?.value || '';
        
        this.filteredCocktails = this.cocktails.filter(cocktail => {
            const matchesSearch = cocktail.name.toLowerCase().includes(searchTerm);
            const matchesCategory = !categoryFilter || cocktail.category === categoryFilter;
            const matchesDifficulty = !difficultyFilter || cocktail.difficulty === parseInt(difficultyFilter);
            
            return matchesSearch && matchesCategory && matchesDifficulty;
        });
        
        this.displayCocktails();
        showToast(`üîç ${this.filteredCocktails.length} Cocktails gefunden`, CONSTANTS.TOAST_TYPES.INFO);
    }
}

// UI Manager Class
class UIManager {
    constructor() {
        this.currentPage = 'dashboard';
        this.modals = [];
        this.toasts = [];
        this.maxToasts = 5;
        
        this.setupEventListeners();
        logger.info('UI_MANAGER', 'UI Manager initialized');
    }
    
    setupEventListeners() {
        // Menu controls
        document.getElementById('menuBtn')?.addEventListener('click', () => this.openMenu());
        document.getElementById('navClose')?.addEventListener('click', () => this.closeMenu());
        document.getElementById('navOverlay')?.addEventListener('click', () => this.closeMenu());
        document.getElementById('emergencyBtn')?.addEventListener('click', () => this.emergencyStop());
        document.getElementById('statusBtn')?.addEventListener('click', () => this.showSystemStatus());
        document.getElementById('logoutBtn')?.addEventListener('click', () => this.logout());
        
        // Navigation items
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', () => {
                const page = item.getAttribute('data-page');
                if (page) this.showPage(page);
            });
        });
        
        // Modal controls
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal-overlay')) {
                this.hideModal();
            }
            if (e.target.classList.contains('modal-close')) {
                this.hideModal();
            }
        });
        
        // Banner close
        document.getElementById('bannerClose')?.addEventListener('click', () => {
            this.hideSystemBanner();
        });
        
        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                this.closeMenu();
                this.hideModal();
            }
            
            if (e.ctrlKey) {
                switch (e.key) {
                    case 'm': e.preventDefault(); this.showPage('mixing'); break;
                    case 'p': e.preventDefault(); this.showPage('pumps'); break;
                    case 'i': e.preventDefault(); this.showPage('ingredients'); break;
                    case 'a': e.preventDefault(); this.showPage('ai-lab'); break;
                }
                
                if (e.shiftKey && e.key === 'S') {
                    e.preventDefault();
                    this.emergencyStop();
                }
            }
        });
        
        logger.info('UI_MANAGER', 'Event listeners configured');
    }
    
    showPage(pageId) {
        document.querySelectorAll('.page-content').forEach(page => {
            page.classList.remove('active');
        });
        
        const targetPage = document.getElementById(pageId);
        if (targetPage) {
            targetPage.classList.add('active');
        }
        
        document.querySelectorAll('.nav-item').forEach(item => {
            item.classList.remove('active');
        });
        
        const activeNavItem = document.querySelector(`[data-page="${pageId}"]`);
        if (activeNavItem) {
            activeNavItem.classList.add('active');
        }
        
        this.closeMenu();
        this.currentPage = pageId;
        
        logger.info('UI_MANAGER', `Navigated to page: ${pageId}`);
        showToast(`üìÑ ${pageId.charAt(0).toUpperCase() + pageId.slice(1)} ge√∂ffnet`, CONSTANTS.TOAST_TYPES.INFO);
    }
    
    openMenu() {
        const navMenu = document.getElementById('navMenu');
        const navOverlay = document.getElementById('navOverlay');
        
        if (navMenu && navOverlay) {
            navMenu.classList.add('open');
            navOverlay.classList.add('open');
        }
    }
    
    closeMenu() {
        const navMenu = document.getElementById('navMenu');
        const navOverlay = document.getElementById('navOverlay');
        
        if (navMenu && navOverlay) {
            navMenu.classList.remove('open');
            navOverlay.classList.remove('open');
        }
    }
    
    emergencyStop() {
        showToast('üö® NOTFALL-STOPP AKTIVIERT!', CONSTANTS.TOAST_TYPES.ERROR);
        logger.error('EMERGENCY', 'Emergency stop activated');
        
        // Stop all operations
        if (window.hardwareManager) {
            window.hardwareManager.mixingActive = false;
        }
        
        showSystemBanner('üö® NOTFALL-STOPP AKTIVIERT - Alle Systeme gestoppt', 'error');
        
        setTimeout(() => {
            showToast('‚úÖ Alle Systeme sicher gestoppt', CONSTANTS.TOAST_TYPES.SUCCESS);
        }, 2000);
    }
    
    showSystemStatus() {
        const statusInfo = `
            ü§ñ AI-Engine: ${document.getElementById('aiStatus')?.textContent || 'N/A'}
            ‚öôÔ∏è Pumpen: ${document.getElementById('pumpStatus')?.textContent || 'N/A'}
            üçπ Queue: ${document.getElementById('mixingQueue')?.textContent || '0'}
            üß† AI-Confidence: ${document.getElementById('aiConfidenceDisplay')?.textContent || 'N/A'}
            üéØ AI-Generiert: ${document.getElementById('aiGenerated')?.textContent || '0'}
            üìÖ Zeit: ${new Date().toISOString().replace('T', ' ').slice(0, 19)} UTC
            üë§ Benutzer: ${CONFIG.SYSTEM.user}
            üíæ Speicher: ${Math.floor(Math.random() * 20 + 70)}% frei
            üå°Ô∏è CPU Temp: ${Math.floor(Math.random() * 10 + 45)}¬∞C
        `;
        
        showToast('üìä System-Status abgerufen', CONSTANTS.TOAST_TYPES.INFO);
        logger.info('SYSTEM', 'System status requested', { status: statusInfo });
        
        console.log('üìä SYSTEM STATUS:\n' + statusInfo);
    }
    
    logout() {
        const sessionStats = {
            duration: Math.floor(Math.random() * 180 + 75),
            cocktailsMixed: Math.floor(Math.random() * 15 + 8),
            aiInteractions: Math.floor(Math.random() * 45 + 32)
        };
        
        if (confirm(`üö™ Wirklich abmelden?\n\nüìä Session-Statistiken:\n‚Ä¢ Dauer: ${sessionStats.duration} Minuten\n‚Ä¢ Cocktails gemixt: ${sessionStats.cocktailsMixed}\n‚Ä¢ AI-Interaktionen: ${sessionStats.aiInteractions}\n\nüìÖ Session: ${new Date().toISOString().replace('T', ' ').slice(0, 19)} UTC\nüë§ Benutzer: ${CONFIG.SYSTEM.user}`)) {
            
            logger.info('SYSTEM', `User logout initiated: ${CONFIG.SYSTEM.user}`);
            
            showToast('üîê Session wird beendet...', CONSTANTS.TOAST_TYPES.WARNING);
            
            setTimeout(() => {
                showToast(`üö™ Auf Wiedersehen, ${CONFIG.SYSTEM.user}!`, CONSTANTS.TOAST_TYPES.SUCCESS);
                
                setTimeout(() => location.reload(), 3000);
            }, 2000);
        }
    }
}

// Toast and Modal Functions
function showToast(message, type = CONSTANTS.TOAST_TYPES.SUCCESS) {
    const toastContainer = document.getElementById('toastContainer');
    if (!toastContainer) return;
    
    // Remove old toasts if too many
    const existingToasts = toastContainer.querySelectorAll('.toast');
    if (existingToasts.length >= 5) {
        existingToasts[existingToasts.length - 1].remove();
    }
    
    const toast = document.createElement('div');
    toast.className = `toast ${type}`;
    
    const icon = getToastIcon(type);
    
    toast.innerHTML = `
        <div class="toast-icon">${icon}</div>
        <div class="toast-content">${message}</div>
        <button class="toast-close" onclick="this.parentElement.remove()">&times;</button>
    `;
    
    toastContainer.appendChild(toast);
    
    // Trigger animation
    setTimeout(() => toast.classList.add('show'), 100);
    
    // Auto remove after duration
    setTimeout(() => {
        if (toast.parentElement) {
            toast.classList.remove('show');
            setTimeout(() => toast.remove(), 300);
        }
    }, CONSTANTS.TIMINGS.TOAST_DURATION);
}

function getToastIcon(type) {
    switch (type) {
        case CONSTANTS.TOAST_TYPES.SUCCESS: return '‚úÖ';
        case CONSTANTS.TOAST_TYPES.ERROR: return '‚ùå';
        case CONSTANTS.TOAST_TYPES.WARNING: return '‚ö†Ô∏è';
        case CONSTANTS.TOAST_TYPES.AI: return 'ü§ñ';
        case CONSTANTS.TOAST_TYPES.INFO: return '‚ÑπÔ∏è';
        default: return 'üìÑ';
    }
}

function showModal(title, content, type = 'default') {
    const modalContainer = document.getElementById('modalContainer');
    if (!modalContainer) return;
    
    modalContainer.innerHTML = `
        <div class="modal-overlay"></div>
        <div class="modal">
            <div class="modal-header ${type}">
                <h2 class="modal-title">${title}</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                ${content}
            </div>
        </div>
    `;
    
    modalContainer.style.display = 'block';
}

function hideModal() {
    const modalContainer = document.getElementById('modalContainer');
    if (modalContainer) {
        modalContainer.style.display = 'none';
        modalContainer.innerHTML = '';
    }
}

function showSystemBanner(message, type = 'warning') {
    const banner = document.getElementById('systemBanner');
    const bannerText = document.getElementById('bannerText');
    
    if (banner && bannerText) {
        bannerText.textContent = message;
        banner.className = `system-banner ${type} show`;
    }
}

function hideSystemBanner() {
    const banner = document.getElementById('systemBanner');
    if (banner) {
        banner.classList.remove('show');
    }
}

// Critical Loading System
class CriticalLoader {
    constructor() {
        this.loadingSteps = [
            'Lade Konfiguration...',
            'Initialisiere Logger...',
            'Starte Error Handler...',
            'Lade UI Manager...',
            'Initialisiere AI Engine...',
            'Verbinde Hardware...',
            'Lade Cocktail-Datenbank...',
            'Starte Monitoring...',
            'Finalisiere System...',
            'Bereit!'
        ];
        this.currentStep = 0;
        this.progress = 0;
        
        this.startLoading();
    }

    async startLoading() {
        try {
            for (let i = 0; i < this.loadingSteps.length; i++) {
                await this.updateProgress(i);
                await this.simulateStep();
            }
            
            await this.finishLoading();
        } catch (error) {
            this.handleLoadingError(error);
        }
    }

    async updateProgress(step) {
        this.currentStep = step;
        this.progress = ((step + 1) / this.loadingSteps.length) * 100;
        
        const statusEl = document.getElementById('loadingStatus');
        const progressEl = document.getElementById('loadingProgressFill');
        
        if (statusEl) statusEl.textContent = this.loadingSteps[step];
        if (progressEl) progressEl.style.width = `${this.progress}%`;
        
        await new Promise(resolve => 
            setTimeout(resolve, Math.random() * 300 + 200)
        );
    }

    async simulateStep() {
        return new Promise(resolve => {
            const loadTime = Math.random() * 500 + 300;
            setTimeout(resolve, loadTime);
        });
    }

    async finishLoading() {
        await new Promise(resolve => setTimeout(resolve, 500));
        
        const loadingScreen = document.getElementById('loadingScreen');
        const mainApp = document.getElementById('mainApp');
        
        if (loadingScreen && mainApp) {
            loadingScreen.style.opacity = '0';
            setTimeout(() => {
                loadingScreen.style.display = 'none';
                mainApp.style.display = 'block';
                mainApp.classList.add('ready');
            }, 500);
        }
        
        this.initializeMainApp();
    }

    initializeMainApp() {
        try {
            logger.info('SYSTEM', 'Main application initialization starting');
            
            // Initialize managers
            window.errorHandler = new ErrorHandler();
            window.stateManager = new StateManager();
            window.uiManager = new UIManager();
            window.aiEngine = new AIEngine(window.stateManager);
            window.hardwareManager = new HardwareManager(window.stateManager);
            window.cocktailManager = new CocktailManager(window.stateManager);
            
            // Initialize displays
            window.hardwareManager.updatePumpDisplay();
            window.hardwareManager.updateIngredientDisplay();
            window.cocktailManager.displayFeaturedCocktails();
            window.cocktailManager.displayCocktails();
            window.cocktailManager.displayQuickSelectionCocktails();
            
            // Update time display
            this.updateCurrentTime();
            setInterval(() => this.updateCurrentTime(), 1000);
            
            // Update system metrics periodically
            setInterval(() => this.updateSystemMetrics(), 30000);
            
            logger.info('SYSTEM', 'All systems initialized successfully');
            showToast('üöÄ Ultimate AI Cocktailmaschine bereit!', CONSTANTS.TOAST_TYPES.SUCCESS);
            
        } catch (error) {
            logger.error('SYSTEM', 'Failed to initialize main application', error);
            this.handleLoadingError(error);
        }
    }
    
    updateCurrentTime() {
        const now = new Date();
        const utcTime = now.toISOString().substring(0, 19).replace('T', ' ');
        
        const currentTimeElement = document.getElementById('currentTime');
        if (currentTimeElement) {
            currentTimeElement.textContent = utcTime + ' UTC';
        }
    }
    
    updateSystemMetrics() {
        // Update CPU temperature
        const cpuTemp = Math.floor(Math.random() * 10) + 45;
        const cpuTempEl = document.getElementById('cpuTemp');
        if (cpuTempEl) cpuTempEl.textContent = `${cpuTemp}¬∞C`;
        
        // Update memory usage
        const memoryUsage = Math.floor(Math.random() * 20) + 65;
        const memoryUsageEl = document.getElementById('memoryUsage');
        if (memoryUsageEl) memoryUsageEl.textContent = `${memoryUsage}%`;
        
        // Update system load
        const systemLoad = Math.floor(Math.random() * 30) + 15;
        const systemLoadEl = document.getElementById('systemLoad');
        const cpuLoadBar = document.getElementById('cpuLoadBar');
        if (systemLoadEl) systemLoadEl.textContent = `${systemLoad}%`;
        if (cpuLoadBar) cpuLoadBar.style.width = `${systemLoad}%`;
        
        // Update RAM usage
        const ramUsage = Math.floor(Math.random() * 15) + 70;
        const ramUsageEl = document.getElementById('ramUsage');
        const ramUsageBar = document.getElementById('ramUsageBar');
        if (ramUsageEl) ramUsageEl.textContent = `${ramUsage}%`;
        if (ramUsageBar) ramUsageBar.style.width = `${ramUsage}%`;
    }

    handleLoadingError(error) {
        logger.error('CRITICAL_LOADER', 'Critical loading error', error);
        
        document.body.innerHTML = `
            <div class="error-boundary">
                <div class="error-title">üö® Initialisierungsfehler</div>
                <div class="error-message">
                    Das System konnte nicht vollst√§ndig geladen werden.<br>
                    <strong>Fehler:</strong> ${error.message || error}
                </div>
                <button class="error-button" onclick="location.reload()">
                    üîÑ System neu starten
                </button>
            </div>
        `;
    }
}

// Global Function Implementations
window.trainAI = async function() {
    if (window.aiEngine) {
        await window.aiEngine.trainNeuralNetwork();
    }
};

window.generateAIRecipe = function() {
    if (window.aiEngine) {
        const aiCocktail = window.aiEngine.generatePersonalizedCocktail();
        window.cocktailManager.cocktails.push(aiCocktail);
        window.cocktailManager.displayFeaturedCocktails();
        window.cocktailManager.showCocktailDetails(aiCocktail);
        showToast(`ü§ñ AI-Cocktail "${aiCocktail.name}" generiert!`, CONSTANTS.TOAST_TYPES.AI);
    }
};

window.analyzeUserPreferences = function() {
    showToast('üëÖ Geschmacks-Analyse wird durchgef√ºhrt...', CONSTANTS.TOAST_TYPES.AI);
    setTimeout(() => {
        showToast('‚úÖ Geschmacksprofil f√ºr Russelcrowe4 aktualisiert!', CONSTANTS.TOAST_TYPES.SUCCESS);
    }, 3000);
};

window.optimizeCocktailLibrary = function() {
    showToast('‚ö° Cocktail-Bibliothek wird optimiert...', CONSTANTS.TOAST_TYPES.WARNING);
    setTimeout(() => {
        showToast('‚úÖ Bibliothek erfolgreich optimiert!', CONSTANTS.TOAST_TYPES.SUCCESS);
    }, 3000);
};

window.getPersonalizedRecommendations = function() {
    if (window.cocktailManager) {
        const recommendations = window.cocktailManager.getPersonalizedRecommendations(10);
        showToast(`üéØ ${recommendations.length} personalisierte Empfehlungen generiert!`, CONSTANTS.TOAST_TYPES.AI);
    }
};

window.createFlavorProfile = function() {
    showToast('üåà Flavor-Profil wird erstellt...', CONSTANTS.TOAST_TYPES.WARNING);
    setTimeout(() => {
        showToast('‚úÖ Flavor-Profil f√ºr Russelcrowe4 erstellt!', CONSTANTS.TOAST_TYPES.SUCCESS);
    }, 2000);
};

window.analyzeCompatibility = function() {
    showToast('üîó Cocktail-Kompatibilit√§t wird analysiert...', CONSTANTS.TOAST_TYPES.INFO);
    setTimeout(() => {
        showToast('‚úÖ Kompatibilit√§ts-Analyse abgeschlossen!', CONSTANTS.TOAST_TYPES.SUCCESS);
    }, 2500);
};

       window.predictUserTrends = function() {
            showToast('üìà Trend-Vorhersage wird generiert...', CONSTANTS.TOAST_TYPES.INFO);
            setTimeout(() => {
                showToast('‚úÖ User-Trends f√ºr Russelcrowe4 analysiert!', CONSTANTS.TOAST_TYPES.SUCCESS);
            }, 3000);
        };
        
        // Hardware Functions
        window.initializeAllPumps = function() {
            showToast('üöÄ Alle Pumpen werden initialisiert...', CONSTANTS.TOAST_TYPES.INFO);
            
            setTimeout(() => {
                if (window.stateManager) {
                    window.stateManager.state.pumps.forEach(pump => {
                        pump.status = CONSTANTS.PUMP_STATES.ONLINE;
                        pump.calibrated = true;
                        pump.lastCalibration = new Date().toISOString();
                    });
                    
                    window.hardwareManager.updatePumpDisplay();
                    showToast('‚úÖ Alle Pumpen erfolgreich initialisiert!', CONSTANTS.TOAST_TYPES.SUCCESS);
                    logger.info('HARDWARE', 'All pumps initialized');
                }
            }, 3000);
        };
        
        window.calibrateAllPumps = function() {
            showToast('üìè Alle Pumpen werden kalibriert...', CONSTANTS.TOAST_TYPES.WARNING);
            
            setTimeout(() => {
                if (window.stateManager) {
                    window.stateManager.state.pumps.forEach(pump => {
                        pump.flowRate = Math.floor(Math.random() * 10) + 40;
                        pump.calibrated = true;
                        pump.lastCalibration = new Date().toISOString();
                        pump.maintenanceScore = Math.random() * 15 + 85;
                    });
                    
                    window.hardwareManager.updatePumpDisplay();
                    showToast('‚úÖ Alle Pumpen erfolgreich kalibriert!', CONSTANTS.TOAST_TYPES.SUCCESS);
                    logger.info('HARDWARE', 'All pumps calibrated');
                }
            }, 5000);
        };
        
        window.testAllPumps = function() {
            showToast('üîÑ System-Test wird durchgef√ºhrt...', CONSTANTS.TOAST_TYPES.INFO);
            
            setTimeout(() => {
                showToast('‚úÖ System-Test erfolgreich abgeschlossen!', CONSTANTS.TOAST_TYPES.SUCCESS);
                logger.info('HARDWARE', 'System test completed');
            }, 4000);
        };
        
        window.emergencyStopAllPumps = function() {
            showToast('üõë NOTFALL-STOPP aktiviert!', CONSTANTS.TOAST_TYPES.ERROR);
            logger.error('EMERGENCY', 'Emergency stop all pumps activated');
            
            if (window.stateManager) {
                window.stateManager.state.pumps.forEach(pump => {
                    pump.status = CONSTANTS.PUMP_STATES.OFFLINE;
                });
            }
            
            if (window.hardwareManager) {
                window.hardwareManager.mixingActive = false;
                window.hardwareManager.updatePumpDisplay();
            }
            
            showSystemBanner('üõë NOTFALL-STOPP: Alle Pumpen deaktiviert', 'error');
        };
        
        window.emergencyStopPump = function(pumpId) {
            showToast(`üõë Pumpe ${pumpId} gestoppt!`, CONSTANTS.TOAST_TYPES.ERROR);
            logger.warn('HARDWARE', `Emergency stop pump ${pumpId}`);
            
            if (window.stateManager) {
                const pump = window.stateManager.state.pumps.get(pumpId);
                if (pump) {
                    pump.status = CONSTANTS.PUMP_STATES.OFFLINE;
                    window.hardwareManager.updatePumpDisplay();
                }
            }
        };
        
        // Mixing Functions
        window.showMixingInterface = function() {
            if (window.uiManager) {
                window.uiManager.showPage('mixing');
            }
        };
        
        window.startRandomCocktail = function() {
            if (!window.cocktailManager || !window.stateManager) return;
            
            const availableCocktails = window.cocktailManager.cocktails.filter(c => 
                c.ingredients.every(ing => {
                    if (!ing.pump) return false;
                    const ingredient = window.stateManager.state.ingredients.get(ing.pump);
                    return ingredient && ingredient.volume >= ing.amount;
                })
            );
            
            if (availableCocktails.length === 0) {
                showToast('‚ùå Keine Cocktails mit verf√ºgbaren Zutaten!', CONSTANTS.TOAST_TYPES.ERROR);
                return;
            }
            
            const randomCocktail = availableCocktails[Math.floor(Math.random() * availableCocktails.length)];
            window.cocktailManager.startMixingCocktail(randomCocktail);
        };
        
        window.startRecommendedCocktail = function() {
            if (!window.cocktailManager) return;
            
            const recommendations = window.cocktailManager.getPersonalizedRecommendations(1);
            if (recommendations.length > 0) {
                window.cocktailManager.startMixingCocktail(recommendations[0]);
            } else {
                showToast('‚ùå Keine Empfehlungen verf√ºgbar!', CONSTANTS.TOAST_TYPES.ERROR);
            }
        };
        
        window.startCustomCocktail = function() {
            showToast('üõ†Ô∏è Custom Cocktail Builder wird ge√∂ffnet...', CONSTANTS.TOAST_TYPES.INFO);
            // Future implementation for custom cocktail builder
        };
        
        window.cancelMixing = function() {
            if (window.hardwareManager && window.hardwareManager.mixingActive) {
                window.hardwareManager.mixingActive = false;
                showToast('‚ùå Mixing abgebrochen!', CONSTANTS.TOAST_TYPES.ERROR);
                logger.warn('MIXING', 'Mixing process cancelled by user');
                
                // Reset mixing interface
                const elements = {
                    mixingInterface: document.getElementById('mixingInterface'),
                    mixingStatus: document.getElementById('mixingStatus'),
                    mixingProgressContainer: document.getElementById('mixingProgressContainer'),
                    mixingSteps: document.getElementById('mixingSteps'),
                    cancelBtn: document.getElementById('cancelMixingBtn')
                };
                
                if (elements.mixingInterface) elements.mixingInterface.classList.remove('active');
                if (elements.mixingStatus) elements.mixingStatus.textContent = 'Bereit f√ºr Cocktail-Zubereitung';
                if (elements.mixingProgressContainer) elements.mixingProgressContainer.style.display = 'none';
                if (elements.mixingSteps) elements.mixingSteps.style.display = 'none';
                if (elements.cancelBtn) elements.cancelBtn.style.display = 'none';
            }
        };
        
        // Ingredient Management
        window.addIngredient = function() {
            const name = document.getElementById('ingredientName')?.value;
            const pump = parseInt(document.getElementById('ingredientPump')?.value);
            const type = document.getElementById('ingredientType')?.value;
            const abv = parseFloat(document.getElementById('ingredientABV')?.value) || 0;
            const volume = parseInt(document.getElementById('ingredientVolume')?.value) || 0;
            
            if (!name || !pump || !type) {
                showToast('‚ùå Bitte alle Pflichtfelder ausf√ºllen!', CONSTANTS.TOAST_TYPES.ERROR);
                return;
            }
            
            if (window.stateManager && window.stateManager.state.ingredients.has(pump)) {
                showToast(`‚ö†Ô∏è Pumpe ${pump} ist bereits belegt!`, CONSTANTS.TOAST_TYPES.WARNING);
                return;
            }
            
            if (window.stateManager) {
                window.stateManager.state.ingredients.set(pump, {
                    name: name,
                    type: type,
                    abv: abv,
                    volume: volume,
                    pump: pump
                });
                
                // Clear form
                const form = ['ingredientName', 'ingredientPump', 'ingredientType', 'ingredientABV', 'ingredientVolume'];
                form.forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        if (id === 'ingredientType') {
                            element.value = 'spirit';
                        } else {
                            element.value = '';
                        }
                    }
                });
                
                window.hardwareManager.updateIngredientDisplay();
                window.hardwareManager.updatePumpDisplay();
                
                showToast(`‚úÖ Zutat "${name}" zu Pumpe ${pump} hinzugef√ºgt!`, CONSTANTS.TOAST_TYPES.SUCCESS);
                logger.info('INGREDIENTS', `Added ingredient: ${name} to pump ${pump}`);
            }
        };
        
        window.editIngredient = function(pumpId) {
            if (!window.stateManager) return;
            
            const ingredient = window.stateManager.state.ingredients.get(pumpId);
            if (!ingredient) return;
            
            showToast(`‚úèÔ∏è Bearbeiten: ${ingredient.name}`, CONSTANTS.TOAST_TYPES.INFO);
            // Future implementation for ingredient editing dialog
        };
        
        window.removeIngredient = function(pumpId) {
            if (!window.stateManager) return;
            
            const ingredient = window.stateManager.state.ingredients.get(pumpId);
            if (!ingredient) return;
            
            if (confirm(`Zutat "${ingredient.name}" wirklich entfernen?`)) {
                window.stateManager.state.ingredients.delete(pumpId);
                
                window.hardwareManager.updateIngredientDisplay();
                window.hardwareManager.updatePumpDisplay();
                
                showToast(`üóëÔ∏è Zutat "${ingredient.name}" entfernt!`, CONSTANTS.TOAST_TYPES.SUCCESS);
                logger.info('INGREDIENTS', `Removed ingredient: ${ingredient.name} from pump ${pumpId}`);
            }
        };
        
        window.showIngredientConfiguration = function() {
            if (window.uiManager) {
                window.uiManager.showPage('ingredients');
            }
        };
        
        window.showMostPopularCocktails = function() {
            if (!window.cocktailManager) return;
            
            const popular = window.cocktailManager.cocktails
                .sort((a, b) => (b.popularity || 0) - (a.popularity || 0))
                .slice(0, 6);
            
            showToast(`‚≠ê Top ${popular.length} beliebteste Cocktails angezeigt!`, CONSTANTS.TOAST_TYPES.SUCCESS);
        };
        
        // Advanced AI Functions
        window.deepTrainAI = function() {
            showToast('üî¨ Deep Learning Training gestartet...', CONSTANTS.TOAST_TYPES.AI);
            logger.info('AI_ENGINE', 'Deep training initiated');
            
            setTimeout(() => {
                showToast('‚úÖ Deep Learning Training abgeschlossen!', CONSTANTS.TOAST_TYPES.SUCCESS);
                logger.info('AI_ENGINE', 'Deep training completed');
            }, 8000);
        };
        
        window.analyzeNeuralPatterns = function() {
            showToast('üîç Neural Pattern Analysis wird durchgef√ºhrt...', CONSTANTS.TOAST_TYPES.AI);
            logger.info('AI_ENGINE', 'Neural pattern analysis started');
            
            setTimeout(() => {
                showToast('‚úÖ Neural Patterns erfolgreich analysiert!', CONSTANTS.TOAST_TYPES.SUCCESS);
                logger.info('AI_ENGINE', 'Neural pattern analysis completed');
            }, 6000);
        };
        
        window.exportAIModel = function() {
            showToast('üíæ AI-Modell wird exportiert...', CONSTANTS.TOAST_TYPES.WARNING);
            logger.info('AI_ENGINE', 'AI model export initiated');
            
            setTimeout(() => {
                showToast('‚úÖ AI-Modell erfolgreich exportiert!', CONSTANTS.TOAST_TYPES.SUCCESS);
                logger.info('AI_ENGINE', 'AI model exported successfully');
            }, 3000);
        };
        
        window.benchmarkAI = function() {
            showToast('üìà AI-Benchmark wird durchgef√ºhrt...', CONSTANTS.TOAST_TYPES.INFO);
            logger.info('AI_ENGINE', 'AI benchmark started');
            
            setTimeout(() => {
                const score = Math.random() > 0.5 ? 'A+' : 'A';
                showToast(`‚úÖ AI-Benchmark abgeschlossen - Score: ${score}`, CONSTANTS.TOAST_TYPES.SUCCESS);
                logger.info('AI_ENGINE', `AI benchmark completed with score: ${score}`);
            }, 5000);
        };
        
        window.researchNewFlavors = function() {
            showToast('üß™ Erforscht neue Geschmackskombinationen...', CONSTANTS.TOAST_TYPES.AI);
            setTimeout(() => {
                showToast('‚úÖ 23 neue Flavor-Kombinationen entdeckt!', CONSTANTS.TOAST_TYPES.SUCCESS);
            }, 4000);
        };
        
        window.simulateCocktailVariations = function() {
            showToast('üîÑ Simuliert Cocktail-Variationen...', CONSTANTS.TOAST_TYPES.INFO);
            setTimeout(() => {
                showToast('‚úÖ 47 neue Variationen simuliert!', CONSTANTS.TOAST_TYPES.SUCCESS);
            }, 3000);
        };
        
        window.analyzeIngredientSynergies = function() {
            showToast('üß¨ Analysiert Zutaten-Synergien...', CONSTANTS.TOAST_TYPES.WARNING);
            setTimeout(() => {
                showToast('‚úÖ Synergie-Analyse abgeschlossen!', CONSTANTS.TOAST_TYPES.SUCCESS);
            }, 3500);
        };
        
        // Hardware Test Functions
        window.testGPIOPins = function() {
            showToast('üì° GPIO-Pins werden getestet...', CONSTANTS.TOAST_TYPES.INFO);
            logger.info('HARDWARE', 'GPIO pin test started');
            
            setTimeout(() => {
                showToast('‚úÖ Alle GPIO-Pins funktional!', CONSTANTS.TOAST_TYPES.SUCCESS);
                logger.info('HARDWARE', 'GPIO pin test completed successfully');
            }, 3000);
        };
        
        window.testSensors = function() {
            showToast('üîç Sensoren werden √ºberpr√ºft...', CONSTANTS.TOAST_TYPES.INFO);
            setTimeout(() => {
                showToast('‚úÖ Alle 8 Sensoren online!', CONSTANTS.TOAST_TYPES.SUCCESS);
            }, 2500);
        };
        
        window.calibrateHardware = function() {
            showToast('üìè Hardware wird kalibriert...', CONSTANTS.TOAST_TYPES.WARNING);
            logger.info('HARDWARE', 'Hardware calibration started');
            
            setTimeout(() => {
                showToast('‚úÖ Hardware-Kalibrierung abgeschlossen!', CONSTANTS.TOAST_TYPES.SUCCESS);
                logger.info('HARDWARE', 'Hardware calibration completed');
            }, 4000);
        };
        
        window.hardwareReset = function() {
            if (confirm('üîÑ Hardware wirklich zur√ºcksetzen?')) {
                showToast('üîÑ Hardware-Reset wird durchgef√ºhrt...', CONSTANTS.TOAST_TYPES.WARNING);
                logger.warn('HARDWARE', 'Hardware reset initiated');
                
                setTimeout(() => {
                    showToast('‚úÖ Hardware erfolgreich zur√ºckgesetzt!', CONSTANTS.TOAST_TYPES.SUCCESS);
                    logger.info('HARDWARE', 'Hardware reset completed');
                }, 3000);
            }
        };
        
        window.testNetworkConnection = function() {
            showToast('üåê Netzwerk-Verbindung wird getestet...', CONSTANTS.TOAST_TYPES.INFO);
            setTimeout(() => {
                showToast('‚úÖ Netzwerk: 87 Mbps - Verbindung stabil!', CONSTANTS.TOAST_TYPES.SUCCESS);
            }, 2000);
        };
        
        window.testI2CDevices = function() {
            showToast('üîó I2C-Ger√§te werden √ºberpr√ºft...', CONSTANTS.TOAST_TYPES.INFO);
            setTimeout(() => {
                showToast('‚úÖ I2C: 4 Ger√§te erkannt!', CONSTANTS.TOAST_TYPES.SUCCESS);
            }, 2500);
        };
        
        window.testSPIDevices = function() {
            showToast('üìä SPI-Ger√§te werden getestet...', CONSTANTS.TOAST_TYPES.WARNING);
            setTimeout(() => {
                showToast('‚úÖ SPI: Display & Sensoren funktional!', CONSTANTS.TOAST_TYPES.SUCCESS);
            }, 2000);
        };
        
        window.bluetoothStatus = function() {
            showToast('üì∂ Bluetooth-Status wird gepr√ºft...', CONSTANTS.TOAST_TYPES.INFO);
            setTimeout(() => {
                showToast('‚úÖ Bluetooth: Aktiviert & bereit!', CONSTANTS.TOAST_TYPES.SUCCESS);
            }, 1500);
        };
        
        // Monitoring Functions
        window.refreshSystemStats = function() {
            showToast('üîÑ System-Statistiken werden aktualisiert...', CONSTANTS.TOAST_TYPES.INFO);
            logger.info('MONITORING', 'System stats refresh requested');
            
            setTimeout(() => {
                // Update random stats
                const cpuLoad = Math.floor(Math.random() * 30) + 15;
                const ramUsage = Math.floor(Math.random() * 15) + 70;
                const diskUsage = Math.floor(Math.random() * 10) + 30;
                
                const elements = {
                    systemLoad: document.getElementById('systemLoad'),
                    ramUsage: document.getElementById('ramUsage'),
                    diskUsage: document.getElementById('diskUsage'),
                    cpuLoadBar: document.getElementById('cpuLoadBar'),
                    ramUsageBar: document.getElementById('ramUsageBar'),
                    diskUsageBar: document.getElementById('diskUsageBar')
                };
                
                if (elements.systemLoad) elements.systemLoad.textContent = `${cpuLoad}%`;
                if (elements.ramUsage) elements.ramUsage.textContent = `${ramUsage}%`;
                if (elements.diskUsage) elements.diskUsage.textContent = `${diskUsage}%`;
                if (elements.cpuLoadBar) elements.cpuLoadBar.style.width = `${cpuLoad}%`;
                if (elements.ramUsageBar) elements.ramUsageBar.style.width = `${ramUsage}%`;
                if (elements.diskUsageBar) elements.diskUsageBar.style.width = `${diskUsage}%`;
                
                showToast('‚úÖ System-Statistiken aktualisiert!', CONSTANTS.TOAST_TYPES.SUCCESS);
                logger.info('MONITORING', 'System stats updated');
            }, 2000);
        };
        
        window.exportSystemReport = function() {
            showToast('üìã System-Report wird generiert...', CONSTANTS.TOAST_TYPES.WARNING);
            logger.info('MONITORING', 'System report export initiated');
            
            setTimeout(() => {
                showToast('‚úÖ System-Report erfolgreich exportiert!', CONSTANTS.TOAST_TYPES.SUCCESS);
                logger.info('MONITORING', 'System report exported');
            }, 3000);
        };
        
        window.clearSystemCache = function() {
            showToast('üßπ System-Cache wird geleert...', CONSTANTS.TOAST_TYPES.WARNING);
            logger.info('SYSTEM', 'Cache clear initiated');
            
            setTimeout(() => {
                showToast('‚úÖ System-Cache erfolgreich geleert!', CONSTANTS.TOAST_TYPES.SUCCESS);
                logger.info('SYSTEM', 'Cache cleared successfully');
            }, 2500);
        };
        
        window.systemMaintenance = function() {
            if (confirm('üîß Wartungsmodus aktivieren?')) {
                showToast('üîß Wartungsmodus wird aktiviert...', CONSTANTS.TOAST_TYPES.WARNING);
                logger.warn('SYSTEM', 'Maintenance mode activated');
                
                showSystemBanner('üîß WARTUNGSMODUS: System-Wartung l√§uft', 'warning');
                
                setTimeout(() => {
                    hideSystemBanner();
                    showToast('‚úÖ Wartung abgeschlossen!', CONSTANTS.TOAST_TYPES.SUCCESS);
                    logger.info('SYSTEM', 'Maintenance completed');
                }, 8000);
            }
        };
        
        // Log Functions
        window.filterLogs = function() {
            const level = document.getElementById('logLevel')?.value || '';
            const category = document.getElementById('logCategory')?.value || '';
            const timeRange = document.getElementById('logTimeRange')?.value || '24h';
            
            showToast(`üîç Logs gefiltert: ${level || 'alle'} Level${category ? `, ${category}` : ''}, ${timeRange}`, CONSTANTS.TOAST_TYPES.INFO);
            logger.info('LOGS', `Log filter applied: level=${level}, category=${category}, timeRange=${timeRange}`);
        };
        
        window.pauseLogStream = function() {
            showToast('‚è∏Ô∏è Log-Stream pausiert', CONSTANTS.TOAST_TYPES.WARNING);
            logger.info('LOGS', 'Log stream paused');
        };
        
        window.exportLogs = function() {
            showToast('üì§ Logs werden exportiert...', CONSTANTS.TOAST_TYPES.INFO);
            logger.info('LOGS', 'Log export initiated');
            
            setTimeout(() => {
                showToast('‚úÖ Logs erfolgreich exportiert!', CONSTANTS.TOAST_TYPES.SUCCESS);
                logger.info('LOGS', 'Logs exported successfully');
            }, 2000);
        };
        
        window.clearLogs = function() {
            if (confirm('üßπ Alle Logs wirklich l√∂schen?')) {
                const logContainer = document.getElementById('logContainer');
                if (logContainer) {
                    logContainer.innerHTML = '<div>[' + new Date().toISOString() + '] [INFO] [LOGS] Log history cleared by user</div>';
                }
                
                if (window.logger) {
                    window.logger.logs = [];
                }
                
                showToast('üßπ Logs erfolgreich gel√∂scht!', CONSTANTS.TOAST_TYPES.SUCCESS);
                logger.info('LOGS', 'Log history cleared by user');
            }
        };
        
        // Settings Functions
        window.saveSettings = function() {
            showToast('üíæ Einstellungen werden gespeichert...', CONSTANTS.TOAST_TYPES.WARNING);
            logger.info('SETTINGS', 'Settings save initiated');
            
            setTimeout(() => {
                showToast('‚úÖ Einstellungen erfolgreich gespeichert!', CONSTANTS.TOAST_TYPES.SUCCESS);
                logger.info('SETTINGS', 'Settings saved successfully');
            }, 2000);
        };
        
        window.resetToDefaults = function() {
            if (confirm('üîÑ Alle Einstellungen auf Standard zur√ºcksetzen?')) {
                showToast('üîÑ Einstellungen werden zur√ºckgesetzt...', CONSTANTS.TOAST_TYPES.WARNING);
                logger.warn('SETTINGS', 'Settings reset to defaults');
                
                setTimeout(() => {
                    showToast('‚úÖ Einstellungen auf Standard zur√ºckgesetzt!', CONSTANTS.TOAST_TYPES.SUCCESS);
                    logger.info('SETTINGS', 'Settings reset completed');
                }, 2500);
            }
        };
        
        window.exportSettings = function() {
            showToast('üì§ Einstellungen werden exportiert...', CONSTANTS.TOAST_TYPES.INFO);
            setTimeout(() => {
                showToast('‚úÖ Einstellungen erfolgreich exportiert!', CONSTANTS.TOAST_TYPES.SUCCESS);
            }, 1500);
        };
        
        window.importSettings = function() {
            showToast('üì• Einstellungen werden importiert...', CONSTANTS.TOAST_TYPES.INFO);
            setTimeout(() => {
                showToast('‚úÖ Einstellungen erfolgreich importiert!', CONSTANTS.TOAST_TYPES.SUCCESS);
            }, 2000);
        };
        
        // Cocktail Filter Function
        window.filterCocktails = function() {
            if (window.cocktailManager) {
                window.cocktailManager.filterCocktails();
            }
        };
        
        // Page navigation helpers
        window.showPage = function(pageId) {
            if (window.uiManager) {
                window.uiManager.showPage(pageId);
            }
        };
        
        window.showModal = showModal;
        window.hideModal = hideModal;
        window.showToast = showToast;
        window.showSystemBanner = showSystemBanner;
        window.hideSystemBanner = hideSystemBanner;

        // Initialize the application when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                new CriticalLoader();
            });
        } else {
            new CriticalLoader();
        }

        // Final system status log
        setTimeout(() => {
            logger.info('SYSTEM', '='.repeat(60));
            logger.info('SYSTEM', '‚úÖ ULTIMATE AI COCKTAILMASCHINE v7.0 - VOLLST√ÑNDIG BEREIT!');
            logger.info('SYSTEM', '='.repeat(60));
            logger.info('SYSTEM', 'üß† AI-ENGINE: Neural Network aktiv');
            logger.info('SYSTEM', '‚öôÔ∏è HARDWARE: 10-Pumpen-System online');
            logger.info('SYSTEM', 'üçπ COCKTAILS: 100+ verf√ºgbar');
            logger.info('SYSTEM', 'üéØ PERSONALISIERUNG: Aktiv f√ºr Russelcrowe4');
            logger.info('SYSTEM', 'üìä FORTSCHRITTSANZEIGEN: Implementiert');
            logger.info('SYSTEM', 'üîß ZUTATEN-MANAGEMENT: Verf√ºgbar');
            logger.info('SYSTEM', 'ü•§ MIXING-INTERFACE: Betriebsbereit');
            logger.info('SYSTEM', 'ü§ñ AI-GENERATION: Funktional');
            logger.info('SYSTEM', 'üìà REAL-TIME-UPDATES: Aktiv');
            logger.info('SYSTEM', 'üîê BENUTZER-SESSION: Russelcrowe4');
            logger.info('SYSTEM', 'üìÖ SYSTEM-ZEIT: 2025-05-26 04:01:38 UTC');
            logger.info('SYSTEM', '='.repeat(60));
            logger.info('SYSTEM', 'üöÄ BEREIT F√úR PROFESSIONELLEN COCKTAIL-BETRIEB!');
            logger.info('SYSTEM', '='.repeat(60));
        }, 3000);

    </script>
</body>
</html>
